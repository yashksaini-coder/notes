/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var K=Object.defineProperty;var ye=Object.getOwnPropertyDescriptor;var Se=Object.getOwnPropertyNames;var ke=Object.prototype.hasOwnProperty;var z=(g,i)=>()=>(g&&(i=g(g=0)),i);var X=(g,i)=>{for(var e in i)K(g,e,{get:i[e],enumerable:!0})},Ie=(g,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of Se(i))!ke.call(g,n)&&n!==e&&K(g,n,{get:()=>i[n],enumerable:!(t=ye(i,n))||t.enumerable});return g};var ze=g=>Ie(K({},"__esModule",{value:!0}),g);var se,re=z(()=>{se={commands:{updateAll:"Set feature properties in all files (add or update)",updateAllNoThumbnail:"Set featured images in all files (add or update)",updateFolder:"Set feature properties in current folder (add or update)",updateFolderNoThumbnail:"Set featured images in current folder (add or update)",removeAll:"Remove feature properties in all files",removeAllNoThumbnail:"Remove featured images in all files",cleanupUnused:"Remove unused downloaded images and thumbnails",rerenderThumbnails:"Re-render all resized thumbnails"},settings:{headings:{advanced:"Advanced",frontmatter:"Frontmatter",localMedia:"Local media",resizeThumbnail:"Resize thumbnail",externalMedia:"External media"},items:{showNotifications:{name:"Show notifications",desc:"Show notifications when the featured image is set, updated or removed."},frontmatterProperty:{name:"Frontmatter property",desc:"The name of the frontmatter property to update with the featured image"},thumbnailsFolder:{name:"Thumbnails folder",desc:"Folder for downloaded thumbnails and resized images. Subfolders will be created automatically for different image types."},excludedFolders:{name:"Excluded folders",desc:"Comma separated list of folders to exclude from the featured image plugin."},resizeFeatureImage:{name:"Resize feature image",desc:"Resize feature image for better performance in scrolling lists."},resizedThumbnailProperty:{name:"Resized thumbnail property name",desc:"The name of the frontmatter property to store the resized thumbnail path.",placeholder:"thumbnail"},maxResizedWidth:{name:"Max resized width",desc:"Maximum width of the resized thumbnail in pixels. Use 0 for no width restriction.",placeholder:"256"},maxResizedHeight:{name:"Max resized height",desc:"Maximum height of the resized thumbnail in pixels. Use 0 for no height restriction.",placeholder:"144"},fillResizedDimensions:{name:"Fill resized dimensions",desc:"When enabled, resized thumbnails will be exactly the size specified by max width and height, maintaining aspect ratio and cropping to fill the dimensions."},verticalAlignment:{name:"Vertical alignment",desc:"Choose the vertical alignment for cropped images.",options:{top:"Top",center:"Center",bottom:"Bottom"}},horizontalAlignment:{name:"Horizontal alignment",desc:"Choose the horizontal alignment for cropped images.",options:{left:"Left",center:"Center",right:"Right"}},mediaLinkFormat:{name:"Media link format",desc:"Choose how to format the featured image property in frontmatter."},frontmatterImageSourceProperties:{name:"Frontmatter image source properties",desc:"Comma-separated list of frontmatter properties to check for image paths/URLs before scanning the document. Supports strings and YAML lists."},onlyUpdateExisting:{name:"Only update if frontmatter property exists",desc:"Enable this to only update the frontmatter property if it already exists."},keepEmptyProperty:{name:"Keep empty property",desc:"When enabled, the frontmatter property will be kept but set to an empty string if no featured image is found. When disabled, the property will be removed."},preserveTemplateImages:{name:"Don't clear existing property",desc:"When enabled, keeps the existing featured image property if no image is found in the document. When disabled, clears or removes the property when no image is detected (depending on the 'Keep empty property' setting)."},requireExclamationForYouTube:{name:"Require exclamation mark for YouTube thumbnails",desc:"If enabled, only YouTube links prefixed with an exclamation mark will be considered for thumbnail download."},downloadExternalImages:{name:"Download external images to thumbnails folder",desc:"Store external image links locally. Disable to skip remote images when selecting a featured image."},downloadYoutubeThumbnails:{name:"Download YouTube thumbnails",desc:"Store YouTube thumbnails locally. Disable to skip YouTube links when selecting a featured image."},debugMode:{name:"Debug mode",desc:"Enable debug mode to log detailed information to the console."},dryRun:{name:"Dry run",desc:"Enable dry run to prevent any changes from being made to your files."},whatsNew:{name:"What's new in Featured Image {version}",desc:"See the latest changes and improvements.",buttonText:"View recent updates"}},info:{rerenderTip:'Tip: After changing alignment or dimension settings, run the command "Re-render all resized thumbnails" from the command palette to update existing thumbnails with the new settings.'}},notices:{updatingAllFiles:"Updating featured images in all files...",updatingFolder:"Updating featured images in current folder...",removingAllImages:"Removing featured images from all files...",cleaningUpUnused:"Cleaning up unused images...",rerenderingThumbnails:"Re-rendering all thumbnails...",completed:"Completed",noActiveFile:"No active file",errorOccurred:"An error occurred",featureSet:"Feature image set",featureUpdated:"Feature image updated",featureRemoved:"Feature image removed",featureUnchanged:"Feature image unchanged",dryRunEnabled:"Dry run enabled - no changes made",filesProcessed:"{count} files processed",imagesDeleted:"{count} images deleted",thumbnailsRerendered:"{count} thumbnails re-rendered"},modals:{mtimeOffsetNote:"Note: File modification times shift forward by about 1.5 seconds so sync providers register the change."},whatsNew:{title:"What's new in Featured Image",categories:{new:"New",improved:"Improved",changed:"Changed",fixed:"Fixed"},supportMessage:"If you find Featured Image useful, consider supporting its development.",supportButton:"Support",thanksButton:"Thanks!"},errors:{httpImageLinkIgnored:(g,i,e)=>`HTTP${e?` ${e}`:""} image link ignored in ${g}: ${i}. Featured Image only processes HTTPS links; update the link to use HTTPS.`}}});var oe,de=z(()=>{oe={commands:{updateAll:"Feature-Eigenschaften in allen Dateien setzen (hinzuf\xFCgen oder aktualisieren)",updateAllNoThumbnail:"Featured Images in allen Dateien setzen (hinzuf\xFCgen oder aktualisieren)",updateFolder:"Feature-Eigenschaften im aktuellen Ordner setzen (hinzuf\xFCgen oder aktualisieren)",updateFolderNoThumbnail:"Featured Images im aktuellen Ordner setzen (hinzuf\xFCgen oder aktualisieren)",removeAll:"Feature-Eigenschaften in allen Dateien entfernen",removeAllNoThumbnail:"Featured Images in allen Dateien entfernen",cleanupUnused:"Ungenutzte heruntergeladene Bilder und Vorschaubilder entfernen",rerenderThumbnails:"Alle verkleinerten Vorschaubilder neu rendern"},settings:{headings:{advanced:"Erweitert",frontmatter:"Frontmatter",localMedia:"Lokale Medien",resizeThumbnail:"Vorschaubild-Gr\xF6\xDFenanpassung",externalMedia:"Externe Medien"},items:{showNotifications:{name:"Benachrichtigungen anzeigen",desc:"Benachrichtigungen anzeigen, wenn das Featured Image gesetzt, aktualisiert oder entfernt wird."},frontmatterProperty:{name:"Frontmatter-Eigenschaft",desc:"Der Name der Frontmatter-Eigenschaft, die mit dem Featured Image aktualisiert werden soll"},thumbnailsFolder:{name:"Vorschaubilder-Ordner",desc:"Ordner f\xFCr heruntergeladene Vorschaubilder und verkleinerte Bilder. Unterordner werden automatisch f\xFCr verschiedene Bildtypen erstellt."},excludedFolders:{name:"Ausgeschlossene Ordner",desc:"Kommagetrennte Liste von Ordnern, die vom Featured Image Plugin ausgeschlossen werden sollen."},resizeFeatureImage:{name:"Feature-Bild verkleinern",desc:"Feature-Bild f\xFCr bessere Leistung in scrollenden Listen verkleinern."},resizedThumbnailProperty:{name:"Name der verkleinerten Vorschaubild-Eigenschaft",desc:"Der Name der Frontmatter-Eigenschaft zum Speichern des verkleinerten Vorschaubild-Pfads.",placeholder:"thumbnail"},maxResizedWidth:{name:"Maximale verkleinerte Breite",desc:"Maximale Breite des verkleinerten Vorschaubilds in Pixeln. 0 f\xFCr keine Breitenbeschr\xE4nkung verwenden.",placeholder:"256"},maxResizedHeight:{name:"Maximale verkleinerte H\xF6he",desc:"Maximale H\xF6he des verkleinerten Vorschaubilds in Pixeln. 0 f\xFCr keine H\xF6henbeschr\xE4nkung verwenden.",placeholder:"144"},fillResizedDimensions:{name:"Verkleinerte Dimensionen ausf\xFCllen",desc:"Wenn aktiviert, haben verkleinerte Vorschaubilder genau die durch maximale Breite und H\xF6he angegebene Gr\xF6\xDFe, wobei das Seitenverh\xE4ltnis beibehalten und zum Ausf\xFCllen der Dimensionen zugeschnitten wird."},verticalAlignment:{name:"Vertikale Ausrichtung",desc:"W\xE4hlen Sie die vertikale Ausrichtung f\xFCr zugeschnittene Bilder.",options:{top:"Oben",center:"Mitte",bottom:"Unten"}},horizontalAlignment:{name:"Horizontale Ausrichtung",desc:"W\xE4hlen Sie die horizontale Ausrichtung f\xFCr zugeschnittene Bilder.",options:{left:"Links",center:"Mitte",right:"Rechts"}},mediaLinkFormat:{name:"Medienlink-Format",desc:"W\xE4hlen Sie, wie die Featured Image Eigenschaft im Frontmatter formatiert werden soll."},frontmatterImageSourceProperties:{name:"Frontmatter-Bildquellen",desc:"Kommagetrennte Liste von Frontmatter-Eigenschaften, die vor dem Scannen des Dokuments nach Bildpfaden/URLs gepr\xFCft werden. Unterst\xFCtzt Strings und YAML-Listen."},onlyUpdateExisting:{name:"Nur aktualisieren, wenn Frontmatter-Eigenschaft existiert",desc:"Aktivieren Sie dies, um die Frontmatter-Eigenschaft nur zu aktualisieren, wenn sie bereits existiert."},keepEmptyProperty:{name:"Leere Eigenschaft beibehalten",desc:"Wenn aktiviert, wird die Frontmatter-Eigenschaft beibehalten, aber auf einen leeren String gesetzt, wenn kein Featured Image gefunden wird. Wenn deaktiviert, wird die Eigenschaft entfernt."},preserveTemplateImages:{name:"Bestehende Eigenschaft nicht l\xF6schen",desc:'Wenn aktiviert, wird die bestehende Featured Image Eigenschaft beibehalten, wenn kein Bild im Dokument gefunden wird. Wenn deaktiviert, wird die Eigenschaft gel\xF6scht oder entfernt, wenn kein Bild erkannt wird (abh\xE4ngig von der Einstellung "Leere Eigenschaft beibehalten").'},requireExclamationForYouTube:{name:"Ausrufezeichen f\xFCr YouTube-Vorschaubilder erforderlich",desc:"Wenn aktiviert, werden nur YouTube-Links mit vorangestelltem Ausrufezeichen f\xFCr den Vorschaubild-Download ber\xFCcksichtigt."},downloadExternalImages:{name:"Externe Bilder in den Vorschaubilder-Ordner herunterladen",desc:"Externe Bildlinks lokal speichern. Deaktivieren, um entfernte Bilder bei der Auswahl eines Featured Image zu \xFCberspringen."},downloadYoutubeThumbnails:{name:"YouTube-Vorschaubilder herunterladen",desc:"YouTube-Vorschaubilder lokal speichern. Deaktivieren, um YouTube-Links bei der Auswahl eines Featured Image zu \xFCberspringen."},debugMode:{name:"Debug-Modus",desc:"Debug-Modus aktivieren, um detaillierte Informationen in der Konsole zu protokollieren."},dryRun:{name:"Testlauf",desc:"Testlauf aktivieren, um zu verhindern, dass \xC4nderungen an Ihren Dateien vorgenommen werden."},whatsNew:{name:"Was ist neu in Featured Image {version}",desc:"Sieh dir die neuesten \xC4nderungen und Verbesserungen an.",buttonText:"Neueste Updates anzeigen"}},info:{rerenderTip:'Tipp: Nach dem \xC4ndern der Ausrichtungs- oder Dimensionseinstellungen f\xFChren Sie den Befehl "Alle verkleinerten Vorschaubilder neu rendern" aus der Befehlspalette aus, um vorhandene Vorschaubilder mit den neuen Einstellungen zu aktualisieren.'}},notices:{updatingAllFiles:"Featured Images in allen Dateien werden aktualisiert...",updatingFolder:"Featured Images im aktuellen Ordner werden aktualisiert...",removingAllImages:"Featured Images aus allen Dateien werden entfernt...",cleaningUpUnused:"Ungenutzte Bilder werden bereinigt...",rerenderingThumbnails:"Alle Vorschaubilder werden neu gerendert...",completed:"Abgeschlossen",noActiveFile:"Keine aktive Datei",errorOccurred:"Ein Fehler ist aufgetreten",featureSet:"Feature-Bild gesetzt",featureUpdated:"Feature-Bild aktualisiert",featureRemoved:"Feature-Bild entfernt",featureUnchanged:"Feature-Bild unver\xE4ndert",dryRunEnabled:"Testlauf aktiviert - keine \xC4nderungen vorgenommen",filesProcessed:"{count} Dateien verarbeitet",imagesDeleted:"{count} Bilder gel\xF6scht",thumbnailsRerendered:"{count} Vorschaubilder neu gerendert"},modals:{mtimeOffsetNote:"Hinweis: Die Dateizeitstempel werden um etwa 1,5 Sekunden nach vorne verschoben, damit Synchronisierungsdienste die \xC4nderung erkennen."},whatsNew:{title:"Was ist neu in Featured Image",categories:{new:"Neu",improved:"Verbessert",changed:"Ge\xE4ndert",fixed:"Behoben"},supportMessage:"Wenn du Featured Image n\xFCtzlich findest, erw\xE4ge bitte eine Unterst\xFCtzung der Entwicklung.",supportButton:"Unterst\xFCtzen",thanksButton:"Danke!"},errors:{httpImageLinkIgnored:(g,i,e)=>`HTTP${e?` ${e}`:""}-Bildlink in ${g} ignoriert: ${i}. Featured Image verarbeitet nur HTTPS-Links; \xE4ndere den Link auf HTTPS.`}}});var le,ue=z(()=>{le={commands:{updateAll:"Establecer propiedades de imagen destacada en todos los archivos (agregar o actualizar)",updateAllNoThumbnail:"Establecer im\xE1genes destacadas en todos los archivos (agregar o actualizar)",updateFolder:"Establecer propiedades de imagen destacada en la carpeta actual (agregar o actualizar)",updateFolderNoThumbnail:"Establecer im\xE1genes destacadas en la carpeta actual (agregar o actualizar)",removeAll:"Eliminar propiedades de imagen destacada en todos los archivos",removeAllNoThumbnail:"Eliminar im\xE1genes destacadas en todos los archivos",cleanupUnused:"Eliminar im\xE1genes descargadas y miniaturas no utilizadas",rerenderThumbnails:"Volver a renderizar todas las miniaturas redimensionadas"},settings:{headings:{advanced:"Avanzado",frontmatter:"Frontmatter",localMedia:"Medios locales",resizeThumbnail:"Redimensionar miniatura",externalMedia:"Medios externos"},items:{showNotifications:{name:"Mostrar notificaciones",desc:"Mostrar notificaciones cuando la imagen destacada se establece, actualiza o elimina."},frontmatterProperty:{name:"Propiedad de frontmatter",desc:"El nombre de la propiedad de frontmatter para actualizar con la imagen destacada"},thumbnailsFolder:{name:"Carpeta de miniaturas",desc:"Carpeta para miniaturas descargadas e im\xE1genes redimensionadas. Se crear\xE1n autom\xE1ticamente subcarpetas para diferentes tipos de im\xE1genes."},excludedFolders:{name:"Carpetas excluidas",desc:"Lista separada por comas de carpetas a excluir del plugin de imagen destacada."},resizeFeatureImage:{name:"Redimensionar imagen destacada",desc:"Redimensionar imagen destacada para mejor rendimiento en listas desplazables."},resizedThumbnailProperty:{name:"Nombre de propiedad de miniatura redimensionada",desc:"El nombre de la propiedad de frontmatter para almacenar la ruta de la miniatura redimensionada.",placeholder:"thumbnail"},maxResizedWidth:{name:"Ancho m\xE1ximo redimensionado",desc:"Ancho m\xE1ximo de la miniatura redimensionada en p\xEDxeles. Use 0 para sin restricci\xF3n de ancho.",placeholder:"256"},maxResizedHeight:{name:"Altura m\xE1xima redimensionada",desc:"Altura m\xE1xima de la miniatura redimensionada en p\xEDxeles. Use 0 para sin restricci\xF3n de altura.",placeholder:"144"},fillResizedDimensions:{name:"Llenar dimensiones redimensionadas",desc:"Cuando est\xE1 habilitado, las miniaturas redimensionadas tendr\xE1n exactamente el tama\xF1o especificado por el ancho y la altura m\xE1ximos, manteniendo la relaci\xF3n de aspecto y recortando para llenar las dimensiones."},verticalAlignment:{name:"Alineaci\xF3n vertical",desc:"Elija la alineaci\xF3n vertical para im\xE1genes recortadas.",options:{top:"Superior",center:"Centro",bottom:"Inferior"}},horizontalAlignment:{name:"Alineaci\xF3n horizontal",desc:"Elija la alineaci\xF3n horizontal para im\xE1genes recortadas.",options:{left:"Izquierda",center:"Centro",right:"Derecha"}},mediaLinkFormat:{name:"Formato de enlace de medios",desc:"Elija c\xF3mo formatear la propiedad de imagen destacada en el frontmatter."},frontmatterImageSourceProperties:{name:"Propiedades de origen de imagen en frontmatter",desc:"Lista separada por comas de propiedades de frontmatter para buscar rutas/URLs de im\xE1genes antes de escanear el documento. Admite cadenas y listas YAML."},onlyUpdateExisting:{name:"Solo actualizar si existe la propiedad de frontmatter",desc:"Habilite esto para actualizar solo la propiedad de frontmatter si ya existe."},keepEmptyProperty:{name:"Mantener propiedad vac\xEDa",desc:"Cuando est\xE1 habilitado, la propiedad de frontmatter se mantendr\xE1 pero se establecer\xE1 en una cadena vac\xEDa si no se encuentra una imagen destacada. Cuando est\xE1 deshabilitado, la propiedad se eliminar\xE1."},preserveTemplateImages:{name:"No borrar propiedad existente",desc:'Cuando est\xE1 habilitado, mantiene la propiedad de imagen destacada existente si no se encuentra ninguna imagen en el documento. Cuando est\xE1 deshabilitado, borra o elimina la propiedad cuando no se detecta ninguna imagen (dependiendo de la configuraci\xF3n "Mantener propiedad vac\xEDa").'},requireExclamationForYouTube:{name:"Requerir signo de exclamaci\xF3n para miniaturas de YouTube",desc:"Si est\xE1 habilitado, solo los enlaces de YouTube con prefijo de signo de exclamaci\xF3n se considerar\xE1n para la descarga de miniaturas."},downloadExternalImages:{name:"Descargar im\xE1genes externas en la carpeta de miniaturas",desc:"Almacenar enlaces de im\xE1genes externas localmente. Deshabilite para omitir im\xE1genes remotas al seleccionar la imagen destacada."},downloadYoutubeThumbnails:{name:"Descargar miniaturas de YouTube",desc:"Almacenar miniaturas de YouTube localmente. Deshabilite para omitir enlaces de YouTube al seleccionar la imagen destacada."},debugMode:{name:"Modo de depuraci\xF3n",desc:"Habilitar el modo de depuraci\xF3n para registrar informaci\xF3n detallada en la consola."},dryRun:{name:"Ejecuci\xF3n de prueba",desc:"Habilitar la ejecuci\xF3n de prueba para evitar que se realicen cambios en sus archivos."},whatsNew:{name:"Novedades en Featured Image {version}",desc:"Consulta los \xFAltimos cambios y mejoras.",buttonText:"Ver actualizaciones recientes"}},info:{rerenderTip:'Consejo: Despu\xE9s de cambiar la configuraci\xF3n de alineaci\xF3n o dimensiones, ejecute el comando "Volver a renderizar todas las miniaturas redimensionadas" desde la paleta de comandos para actualizar las miniaturas existentes con la nueva configuraci\xF3n.'}},notices:{updatingAllFiles:"Actualizando im\xE1genes destacadas en todos los archivos...",updatingFolder:"Actualizando im\xE1genes destacadas en la carpeta actual...",removingAllImages:"Eliminando im\xE1genes destacadas de todos los archivos...",cleaningUpUnused:"Limpiando im\xE1genes no utilizadas...",rerenderingThumbnails:"Volviendo a renderizar todas las miniaturas...",completed:"Completado",noActiveFile:"Sin archivo activo",errorOccurred:"Ocurri\xF3 un error",featureSet:"Imagen destacada establecida",featureUpdated:"Imagen destacada actualizada",featureRemoved:"Imagen destacada eliminada",featureUnchanged:"Imagen destacada sin cambios",dryRunEnabled:"Ejecuci\xF3n de prueba habilitada - no se realizaron cambios",filesProcessed:"{count} archivos procesados",imagesDeleted:"{count} im\xE1genes eliminadas",thumbnailsRerendered:"{count} miniaturas re-renderizadas"},modals:{mtimeOffsetNote:"Nota: Las marcas de tiempo de los archivos se adelantan unos 1,5 segundos para que los servicios de sincronizaci\xF3n registren el cambio."},whatsNew:{title:"Novedades en Featured Image",categories:{new:"Nuevo",improved:"Mejorado",changed:"Cambiado",fixed:"Corregido"},supportMessage:"Si te resulta \xFAtil Featured Image, considera apoyar su desarrollo.",supportButton:"Apoyar",thanksButton:"\xA1Gracias!"},errors:{httpImageLinkIgnored:(g,i,e)=>`Enlace de imagen HTTP${e?` ${e}`:""} ignorado en ${g}: ${i}. Featured Image solo procesa enlaces HTTPS; actualiza el enlace a HTTPS.`}}});var me,ge=z(()=>{me={commands:{updateAll:"D\xE9finir les propri\xE9t\xE9s d'image vedette dans tous les fichiers (ajouter ou mettre \xE0 jour)",updateAllNoThumbnail:"D\xE9finir les images vedettes dans tous les fichiers (ajouter ou mettre \xE0 jour)",updateFolder:"D\xE9finir les propri\xE9t\xE9s d'image vedette dans le dossier actuel (ajouter ou mettre \xE0 jour)",updateFolderNoThumbnail:"D\xE9finir les images vedettes dans le dossier actuel (ajouter ou mettre \xE0 jour)",removeAll:"Supprimer les propri\xE9t\xE9s d'image vedette dans tous les fichiers",removeAllNoThumbnail:"Supprimer les images vedettes dans tous les fichiers",cleanupUnused:"Supprimer les images t\xE9l\xE9charg\xE9es et miniatures inutilis\xE9es",rerenderThumbnails:"Re-g\xE9n\xE9rer toutes les miniatures redimensionn\xE9es"},settings:{headings:{advanced:"Avanc\xE9",frontmatter:"Frontmatter",localMedia:"M\xE9dias locaux",resizeThumbnail:"Redimensionner la miniature",externalMedia:"M\xE9dias externes"},items:{showNotifications:{name:"Afficher les notifications",desc:"Afficher les notifications lorsque l'image vedette est d\xE9finie, mise \xE0 jour ou supprim\xE9e."},frontmatterProperty:{name:"Propri\xE9t\xE9 frontmatter",desc:"Le nom de la propri\xE9t\xE9 frontmatter \xE0 mettre \xE0 jour avec l'image vedette"},thumbnailsFolder:{name:"Dossier des miniatures",desc:"Dossier pour les miniatures t\xE9l\xE9charg\xE9es et les images redimensionn\xE9es. Des sous-dossiers seront cr\xE9\xE9s automatiquement pour diff\xE9rents types d'images."},excludedFolders:{name:"Dossiers exclus",desc:"Liste de dossiers s\xE9par\xE9s par des virgules \xE0 exclure du plugin d'image vedette."},resizeFeatureImage:{name:"Redimensionner l'image vedette",desc:"Redimensionner l'image vedette pour de meilleures performances dans les listes d\xE9filantes."},resizedThumbnailProperty:{name:"Nom de la propri\xE9t\xE9 de miniature redimensionn\xE9e",desc:"Le nom de la propri\xE9t\xE9 frontmatter pour stocker le chemin de la miniature redimensionn\xE9e.",placeholder:"thumbnail"},maxResizedWidth:{name:"Largeur maximale redimensionn\xE9e",desc:"Largeur maximale de la miniature redimensionn\xE9e en pixels. Utilisez 0 pour aucune restriction de largeur.",placeholder:"256"},maxResizedHeight:{name:"Hauteur maximale redimensionn\xE9e",desc:"Hauteur maximale de la miniature redimensionn\xE9e en pixels. Utilisez 0 pour aucune restriction de hauteur.",placeholder:"144"},fillResizedDimensions:{name:"Remplir les dimensions redimensionn\xE9es",desc:"Lorsque activ\xE9, les miniatures redimensionn\xE9es auront exactement la taille sp\xE9cifi\xE9e par la largeur et la hauteur maximales, en maintenant le rapport d'aspect et en recadrant pour remplir les dimensions."},verticalAlignment:{name:"Alignement vertical",desc:"Choisissez l'alignement vertical pour les images recadr\xE9es.",options:{top:"Haut",center:"Centre",bottom:"Bas"}},horizontalAlignment:{name:"Alignement horizontal",desc:"Choisissez l'alignement horizontal pour les images recadr\xE9es.",options:{left:"Gauche",center:"Centre",right:"Droite"}},mediaLinkFormat:{name:"Format de lien m\xE9dia",desc:"Choisissez comment formater la propri\xE9t\xE9 d'image vedette dans le frontmatter."},frontmatterImageSourceProperties:{name:"Propri\xE9t\xE9s source d'image (frontmatter)",desc:"Liste de propri\xE9t\xE9s frontmatter s\xE9par\xE9es par des virgules \xE0 v\xE9rifier pour des chemins/URLs d'image avant de scanner le document. Prend en charge les cha\xEEnes et les listes YAML."},onlyUpdateExisting:{name:"Mettre \xE0 jour uniquement si la propri\xE9t\xE9 frontmatter existe",desc:"Activez ceci pour mettre \xE0 jour uniquement la propri\xE9t\xE9 frontmatter si elle existe d\xE9j\xE0."},keepEmptyProperty:{name:"Conserver la propri\xE9t\xE9 vide",desc:"Lorsque activ\xE9, la propri\xE9t\xE9 frontmatter sera conserv\xE9e mais d\xE9finie sur une cha\xEEne vide si aucune image vedette n'est trouv\xE9e. Lorsque d\xE9sactiv\xE9, la propri\xE9t\xE9 sera supprim\xE9e."},preserveTemplateImages:{name:"Ne pas effacer la propri\xE9t\xE9 existante",desc:`Lorsque activ\xE9, conserve la propri\xE9t\xE9 d'image vedette existante si aucune image n'est trouv\xE9e dans le document. Lorsque d\xE9sactiv\xE9, efface ou supprime la propri\xE9t\xE9 lorsqu'aucune image n'est d\xE9tect\xE9e (selon le param\xE8tre "Conserver la propri\xE9t\xE9 vide").`},requireExclamationForYouTube:{name:"Exiger un point d'exclamation pour les miniatures YouTube",desc:"Si activ\xE9, seuls les liens YouTube pr\xE9fix\xE9s d'un point d'exclamation seront consid\xE9r\xE9s pour le t\xE9l\xE9chargement de miniatures."},downloadExternalImages:{name:"T\xE9l\xE9charger les images externes dans le dossier des miniatures",desc:"Stocker les liens d'images externes localement. D\xE9sactivez pour ignorer les images distantes lors de la s\xE9lection de l'image vedette."},downloadYoutubeThumbnails:{name:"T\xE9l\xE9charger les miniatures YouTube",desc:"Stocker les miniatures YouTube localement. D\xE9sactivez pour ignorer les liens YouTube lors de la s\xE9lection de l\u2019image vedette."},debugMode:{name:"Mode d\xE9bogage",desc:"Activer le mode d\xE9bogage pour enregistrer des informations d\xE9taill\xE9es dans la console."},dryRun:{name:"Ex\xE9cution \xE0 blanc",desc:"Activer l'ex\xE9cution \xE0 blanc pour emp\xEAcher toute modification de vos fichiers."},whatsNew:{name:"Nouveaut\xE9s de Featured Image {version}",desc:"Voir les derni\xE8res modifications et am\xE9liorations.",buttonText:"Voir les mises \xE0 jour r\xE9centes"}},info:{rerenderTip:`Astuce : Apr\xE8s avoir modifi\xE9 les param\xE8tres d'alignement ou de dimensions, ex\xE9cutez la commande "Re-g\xE9n\xE9rer toutes les miniatures redimensionn\xE9es" depuis la palette de commandes pour mettre \xE0 jour les miniatures existantes avec les nouveaux param\xE8tres.`}},notices:{updatingAllFiles:"Mise \xE0 jour des images vedettes dans tous les fichiers...",updatingFolder:"Mise \xE0 jour des images vedettes dans le dossier actuel...",removingAllImages:"Suppression des images vedettes de tous les fichiers...",cleaningUpUnused:"Nettoyage des images inutilis\xE9es...",rerenderingThumbnails:"Re-g\xE9n\xE9ration de toutes les miniatures...",completed:"Termin\xE9",noActiveFile:"Aucun fichier actif",errorOccurred:"Une erreur s'est produite",featureSet:"Image vedette d\xE9finie",featureUpdated:"Image vedette mise \xE0 jour",featureRemoved:"Image vedette supprim\xE9e",featureUnchanged:"Image vedette inchang\xE9e",dryRunEnabled:"Ex\xE9cution \xE0 blanc activ\xE9e - aucune modification effectu\xE9e",filesProcessed:"{count} fichiers trait\xE9s",imagesDeleted:"{count} images supprim\xE9es",thumbnailsRerendered:"{count} miniatures re-g\xE9n\xE9r\xE9es"},modals:{mtimeOffsetNote:"Remarque : les horodatages des fichiers sont avanc\xE9s d'environ 1,5 seconde afin que les services de synchronisation d\xE9tectent la modification."},whatsNew:{title:"Nouveaut\xE9s de Featured Image",categories:{new:"Nouveau",improved:"Am\xE9lior\xE9",changed:"Modifi\xE9",fixed:"Corrig\xE9"},supportMessage:"Si Featured Image vous est utile, pensez \xE0 soutenir son d\xE9veloppement.",supportButton:"Soutenir",thanksButton:"Merci !"},errors:{httpImageLinkIgnored:(g,i,e)=>`Lien d'image HTTP${e?` ${e}`:""} ignor\xE9 dans ${g} : ${i}. Featured Image ne traite que les liens HTTPS ; modifie le lien en HTTPS.`}}});var ce,pe=z(()=>{ce={commands:{updateAll:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",updateAllNoThumbnail:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",updateFolder:"\u73FE\u5728\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",updateFolderNoThumbnail:"\u73FE\u5728\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",removeAll:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u304B\u3089\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u524A\u9664",removeAllNoThumbnail:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u304B\u3089\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u524A\u9664",cleanupUnused:"\u672A\u4F7F\u7528\u306E\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u753B\u50CF\u3068\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u524A\u9664",rerenderThumbnails:"\u3059\u3079\u3066\u306E\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0"},settings:{headings:{advanced:"\u8A73\u7D30\u8A2D\u5B9A",frontmatter:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC",localMedia:"\u30ED\u30FC\u30AB\u30EB\u30E1\u30C7\u30A3\u30A2",resizeThumbnail:"\u30B5\u30E0\u30CD\u30A4\u30EB\u306E\u30EA\u30B5\u30A4\u30BA",externalMedia:"\u5916\u90E8\u30E1\u30C7\u30A3\u30A2"},items:{showNotifications:{name:"\u901A\u77E5\u3092\u8868\u793A",desc:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u304C\u8A2D\u5B9A\u3001\u66F4\u65B0\u3001\u524A\u9664\u3055\u308C\u305F\u3068\u304D\u306B\u901A\u77E5\u3092\u8868\u793A\u3057\u307E\u3059\u3002"},frontmatterProperty:{name:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3",desc:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3067\u66F4\u65B0\u3059\u308B\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306E\u540D\u524D"},thumbnailsFolder:{name:"\u30B5\u30E0\u30CD\u30A4\u30EB\u30D5\u30A9\u30EB\u30C0",desc:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u3068\u30EA\u30B5\u30A4\u30BA\u3057\u305F\u753B\u50CF\u7528\u306E\u30D5\u30A9\u30EB\u30C0\u3002\u7570\u306A\u308B\u753B\u50CF\u30BF\u30A4\u30D7\u7528\u306E\u30B5\u30D6\u30D5\u30A9\u30EB\u30C0\u304C\u81EA\u52D5\u7684\u306B\u4F5C\u6210\u3055\u308C\u307E\u3059\u3002"},excludedFolders:{name:"\u9664\u5916\u30D5\u30A9\u30EB\u30C0",desc:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30E9\u30B0\u30A4\u30F3\u304B\u3089\u9664\u5916\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u30AB\u30F3\u30DE\u533A\u5207\u308A\u30EA\u30B9\u30C8\u3002"},resizeFeatureImage:{name:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u30EA\u30B5\u30A4\u30BA",desc:"\u30B9\u30AF\u30ED\u30FC\u30EB\u30EA\u30B9\u30C8\u3067\u306E\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u5411\u4E0A\u306E\u305F\u3081\u3001\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u30EA\u30B5\u30A4\u30BA\u3057\u307E\u3059\u3002"},resizedThumbnailProperty:{name:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u30D7\u30ED\u30D1\u30C6\u30A3\u540D",desc:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u30D1\u30B9\u3092\u4FDD\u5B58\u3059\u308B\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306E\u540D\u524D\u3002",placeholder:"thumbnail"},maxResizedWidth:{name:"\u6700\u5927\u30EA\u30B5\u30A4\u30BA\u5E45",desc:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u306E\u6700\u5927\u5E45\uFF08\u30D4\u30AF\u30BB\u30EB\uFF09\u3002\u5E45\u5236\u9650\u306A\u3057\u306E\u5834\u5408\u306F0\u3092\u4F7F\u7528\u3002",placeholder:"256"},maxResizedHeight:{name:"\u6700\u5927\u30EA\u30B5\u30A4\u30BA\u9AD8\u3055",desc:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u306E\u6700\u5927\u9AD8\u3055\uFF08\u30D4\u30AF\u30BB\u30EB\uFF09\u3002\u9AD8\u3055\u5236\u9650\u306A\u3057\u306E\u5834\u5408\u306F0\u3092\u4F7F\u7528\u3002",placeholder:"144"},fillResizedDimensions:{name:"\u30EA\u30B5\u30A4\u30BA\u5BF8\u6CD5\u3092\u6E80\u305F\u3059",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u306F\u6700\u5927\u5E45\u3068\u9AD8\u3055\u3067\u6307\u5B9A\u3055\u308C\u305F\u30B5\u30A4\u30BA\u306B\u306A\u308A\u3001\u30A2\u30B9\u30DA\u30AF\u30C8\u6BD4\u3092\u7DAD\u6301\u3057\u3001\u5BF8\u6CD5\u3092\u6E80\u305F\u3059\u3088\u3046\u306B\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u307E\u3059\u3002"},verticalAlignment:{name:"\u5782\u76F4\u65B9\u5411\u306E\u914D\u7F6E",desc:"\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u753B\u50CF\u306E\u5782\u76F4\u65B9\u5411\u306E\u914D\u7F6E\u3092\u9078\u629E\u3057\u307E\u3059\u3002",options:{top:"\u4E0A",center:"\u4E2D\u592E",bottom:"\u4E0B"}},horizontalAlignment:{name:"\u6C34\u5E73\u65B9\u5411\u306E\u914D\u7F6E",desc:"\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u753B\u50CF\u306E\u6C34\u5E73\u65B9\u5411\u306E\u914D\u7F6E\u3092\u9078\u629E\u3057\u307E\u3059\u3002",options:{left:"\u5DE6",center:"\u4E2D\u592E",right:"\u53F3"}},mediaLinkFormat:{name:"\u30E1\u30C7\u30A3\u30A2\u30EA\u30F3\u30AF\u5F62\u5F0F",desc:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u3067\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u3059\u308B\u65B9\u6CD5\u3092\u9078\u629E\u3057\u307E\u3059\u3002"},frontmatterImageSourceProperties:{name:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u753B\u50CF\u30BD\u30FC\u30B9\u30D7\u30ED\u30D1\u30C6\u30A3",desc:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u30B9\u30AD\u30E3\u30F3\u3059\u308B\u524D\u306B\u3001\u753B\u50CF\u30D1\u30B9/URL \u3092\u30C1\u30A7\u30C3\u30AF\u3059\u308B\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u540D\uFF08\u30AB\u30F3\u30DE\u533A\u5207\u308A\uFF09\u3002\u6587\u5B57\u5217\u3068 YAML \u30EA\u30B9\u30C8\u306B\u5BFE\u5FDC\u3002"},onlyUpdateExisting:{name:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u304C\u5B58\u5728\u3059\u308B\u5834\u5408\u306E\u307F\u66F4\u65B0",desc:"\u3053\u308C\u3092\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u304C\u65E2\u306B\u5B58\u5728\u3059\u308B\u5834\u5408\u306E\u307F\u66F4\u65B0\u3055\u308C\u307E\u3059\u3002"},keepEmptyProperty:{name:"\u7A7A\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u4FDD\u6301",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u5834\u5408\u3001\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306F\u4FDD\u6301\u3055\u308C\u307E\u3059\u304C\u7A7A\u306E\u6587\u5B57\u5217\u306B\u8A2D\u5B9A\u3055\u308C\u307E\u3059\u3002\u7121\u52B9\u306B\u3059\u308B\u3068\u3001\u30D7\u30ED\u30D1\u30C6\u30A3\u306F\u524A\u9664\u3055\u308C\u307E\u3059\u3002"},preserveTemplateImages:{name:"\u65E2\u5B58\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u30AF\u30EA\u30A2\u3057\u306A\u3044",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306B\u753B\u50CF\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u5834\u5408\u3001\u65E2\u5B58\u306E\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u4FDD\u6301\u3057\u307E\u3059\u3002\u7121\u52B9\u306B\u3059\u308B\u3068\u3001\u753B\u50CF\u304C\u691C\u51FA\u3055\u308C\u306A\u3044\u5834\u5408\u3001\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u30AF\u30EA\u30A2\u307E\u305F\u306F\u524A\u9664\u3057\u307E\u3059\uFF08\u300C\u7A7A\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u4FDD\u6301\u300D\u8A2D\u5B9A\u306B\u4F9D\u5B58\uFF09\u3002"},requireExclamationForYouTube:{name:"YouTube\u30B5\u30E0\u30CD\u30A4\u30EB\u306B\u611F\u5606\u7B26\u304C\u5FC5\u8981",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u611F\u5606\u7B26\u304C\u524D\u306B\u4ED8\u3044\u305FYouTube\u30EA\u30F3\u30AF\u306E\u307F\u304C\u30B5\u30E0\u30CD\u30A4\u30EB\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u306E\u5BFE\u8C61\u3068\u306A\u308A\u307E\u3059\u3002"},downloadExternalImages:{name:"\u5916\u90E8\u753B\u50CF\u3092\u30B5\u30E0\u30CD\u30A4\u30EB\u30D5\u30A9\u30EB\u30C0\u306B\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",desc:"\u5916\u90E8\u753B\u50CF\u30EA\u30F3\u30AF\u3092\u30ED\u30FC\u30AB\u30EB\u306B\u4FDD\u5B58\u3057\u307E\u3059\u3002\u7121\u52B9\u306B\u3059\u308B\u3068\u3001\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u306E\u9078\u629E\u6642\u306B\u30EA\u30E2\u30FC\u30C8\u753B\u50CF\u3092\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3059\u3002"},downloadYoutubeThumbnails:{name:"YouTube\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",desc:"YouTube\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30ED\u30FC\u30AB\u30EB\u306B\u4FDD\u5B58\u3057\u307E\u3059\u3002\u7121\u52B9\u306B\u3059\u308B\u3068\u3001\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u306E\u9078\u629E\u6642\u306BYouTube\u30EA\u30F3\u30AF\u3092\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3059\u3002"},debugMode:{name:"\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9",desc:"\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9\u3092\u6709\u52B9\u306B\u3057\u3066\u3001\u30B3\u30F3\u30BD\u30FC\u30EB\u306B\u8A73\u7D30\u60C5\u5831\u3092\u30ED\u30B0\u51FA\u529B\u3057\u307E\u3059\u3002"},dryRun:{name:"\u30C9\u30E9\u30A4\u30E9\u30F3",desc:"\u30C9\u30E9\u30A4\u30E9\u30F3\u3092\u6709\u52B9\u306B\u3057\u3066\u3001\u30D5\u30A1\u30A4\u30EB\u3078\u306E\u5909\u66F4\u3092\u9632\u304E\u307E\u3059\u3002"},whatsNew:{name:"Featured Image {version} \u306E\u66F4\u65B0\u5185\u5BB9",desc:"\u6700\u65B0\u306E\u5909\u66F4\u70B9\u3068\u6539\u5584\u70B9\u3092\u78BA\u8A8D\u3057\u307E\u3059\u3002",buttonText:"\u6700\u8FD1\u306E\u66F4\u65B0\u3092\u8868\u793A"}},info:{rerenderTip:"\u30D2\u30F3\u30C8\uFF1A\u914D\u7F6E\u3084\u5BF8\u6CD5\u306E\u8A2D\u5B9A\u3092\u5909\u66F4\u3057\u305F\u5F8C\u3001\u30B3\u30DE\u30F3\u30C9\u30D1\u30EC\u30C3\u30C8\u304B\u3089\u300C\u3059\u3079\u3066\u306E\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u300D\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3057\u3066\u3001\u65E2\u5B58\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u65B0\u3057\u3044\u8A2D\u5B9A\u3067\u66F4\u65B0\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}},notices:{updatingAllFiles:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u66F4\u65B0\u4E2D...",updatingFolder:"\u73FE\u5728\u306E\u30D5\u30A9\u30EB\u30C0\u306E\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u66F4\u65B0\u4E2D...",removingAllImages:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u304B\u3089\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u524A\u9664\u4E2D...",cleaningUpUnused:"\u672A\u4F7F\u7528\u306E\u753B\u50CF\u3092\u30AF\u30EA\u30FC\u30F3\u30A2\u30C3\u30D7\u4E2D...",rerenderingThumbnails:"\u3059\u3079\u3066\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u4E2D...",completed:"\u5B8C\u4E86",noActiveFile:"\u30A2\u30AF\u30C6\u30A3\u30D6\u306A\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u307E\u305B\u3093",errorOccurred:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",featureSet:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u8A2D\u5B9A\u3057\u307E\u3057\u305F",featureUpdated:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u66F4\u65B0\u3057\u307E\u3057\u305F",featureRemoved:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u524A\u9664\u3057\u307E\u3057\u305F",featureUnchanged:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u306F\u5909\u66F4\u3055\u308C\u307E\u305B\u3093\u3067\u3057\u305F",dryRunEnabled:"\u30C9\u30E9\u30A4\u30E9\u30F3\u6709\u52B9 - \u5909\u66F4\u306F\u884C\u308F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",filesProcessed:"{count}\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u51E6\u7406\u3057\u307E\u3057\u305F",imagesDeleted:"{count}\u500B\u306E\u753B\u50CF\u3092\u524A\u9664\u3057\u307E\u3057\u305F",thumbnailsRerendered:"{count}\u500B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3057\u307E\u3057\u305F"},modals:{mtimeOffsetNote:"\u6CE8\u610F: \u540C\u671F\u30B5\u30FC\u30D3\u30B9\u304C\u5909\u66F4\u3092\u691C\u51FA\u3067\u304D\u308B\u3088\u3046\u306B\u3001\u30D5\u30A1\u30A4\u30EB\u306E\u66F4\u65B0\u6642\u523B\u3092\u7D041.5\u79D2\u5148\u306B\u305A\u3089\u3057\u307E\u3059\u3002"},whatsNew:{title:"Featured Image \u306E\u66F4\u65B0\u5185\u5BB9",categories:{new:"\u65B0\u898F",improved:"\u6539\u5584",changed:"\u5909\u66F4",fixed:"\u4FEE\u6B63"},supportMessage:"Featured Image \u304C\u5F79\u7ACB\u3064\u5834\u5408\u306F\u3001\u958B\u767A\u306E\u652F\u63F4\u3092\u3054\u691C\u8A0E\u304F\u3060\u3055\u3044\u3002",supportButton:"\u652F\u63F4\u3059\u308B",thanksButton:"\u3042\u308A\u304C\u3068\u3046\uFF01"},errors:{httpImageLinkIgnored:(g,i,e)=>`HTTP${e?` ${e}`:""}\u753B\u50CF\u30EA\u30F3\u30AF\u3092${g}\u3067\u7121\u8996\u3057\u307E\u3057\u305F: ${i}\u3002Featured Image\u306FHTTPS\u30EA\u30F3\u30AF\u306E\u307F\u51E6\u7406\u3057\u307E\u3059\u3002\u30EA\u30F3\u30AF\u3092HTTPS\u306B\u5909\u66F4\u3057\u3066\u304F\u3060\u3055\u3044\u3002`}}});var he,fe=z(()=>{he={commands:{updateAll:"\u5728\u6240\u6709\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\u5C5E\u6027\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",updateAllNoThumbnail:"\u5728\u6240\u6709\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",updateFolder:"\u5728\u5F53\u524D\u6587\u4EF6\u5939\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\u5C5E\u6027\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",updateFolderNoThumbnail:"\u5728\u5F53\u524D\u6587\u4EF6\u5939\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",removeAll:"\u4ECE\u6240\u6709\u6587\u4EF6\u4E2D\u5220\u9664\u7279\u8272\u56FE\u7247\u5C5E\u6027",removeAllNoThumbnail:"\u4ECE\u6240\u6709\u6587\u4EF6\u4E2D\u5220\u9664\u7279\u8272\u56FE\u7247",cleanupUnused:"\u5220\u9664\u672A\u4F7F\u7528\u7684\u4E0B\u8F7D\u56FE\u7247\u548C\u7F29\u7565\u56FE",rerenderThumbnails:"\u91CD\u65B0\u6E32\u67D3\u6240\u6709\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE"},settings:{headings:{advanced:"\u9AD8\u7EA7",frontmatter:"Frontmatter",localMedia:"\u672C\u5730\u5A92\u4F53",resizeThumbnail:"\u8C03\u6574\u7F29\u7565\u56FE\u5927\u5C0F",externalMedia:"\u5916\u90E8\u5A92\u4F53"},items:{showNotifications:{name:"\u663E\u793A\u901A\u77E5",desc:"\u5F53\u7279\u8272\u56FE\u7247\u88AB\u8BBE\u7F6E\u3001\u66F4\u65B0\u6216\u5220\u9664\u65F6\u663E\u793A\u901A\u77E5\u3002"},frontmatterProperty:{name:"Frontmatter \u5C5E\u6027",desc:"\u7528\u7279\u8272\u56FE\u7247\u66F4\u65B0\u7684 frontmatter \u5C5E\u6027\u540D\u79F0"},thumbnailsFolder:{name:"\u7F29\u7565\u56FE\u6587\u4EF6\u5939",desc:"\u7528\u4E8E\u4E0B\u8F7D\u7684\u7F29\u7565\u56FE\u548C\u8C03\u6574\u5927\u5C0F\u7684\u56FE\u7247\u7684\u6587\u4EF6\u5939\u3002\u5C06\u81EA\u52A8\u4E3A\u4E0D\u540C\u7684\u56FE\u7247\u7C7B\u578B\u521B\u5EFA\u5B50\u6587\u4EF6\u5939\u3002"},excludedFolders:{name:"\u6392\u9664\u7684\u6587\u4EF6\u5939",desc:"\u8981\u4ECE\u7279\u8272\u56FE\u7247\u63D2\u4EF6\u4E2D\u6392\u9664\u7684\u6587\u4EF6\u5939\u7684\u9017\u53F7\u5206\u9694\u5217\u8868\u3002"},resizeFeatureImage:{name:"\u8C03\u6574\u7279\u8272\u56FE\u7247\u5927\u5C0F",desc:"\u8C03\u6574\u7279\u8272\u56FE\u7247\u5927\u5C0F\u4EE5\u83B7\u5F97\u66F4\u597D\u7684\u6EDA\u52A8\u5217\u8868\u6027\u80FD\u3002"},resizedThumbnailProperty:{name:"\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u5C5E\u6027\u540D\u79F0",desc:"\u7528\u4E8E\u5B58\u50A8\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u8DEF\u5F84\u7684 frontmatter \u5C5E\u6027\u540D\u79F0\u3002",placeholder:"thumbnail"},maxResizedWidth:{name:"\u6700\u5927\u8C03\u6574\u5BBD\u5EA6",desc:"\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u7684\u6700\u5927\u5BBD\u5EA6\uFF08\u50CF\u7D20\uFF09\u3002\u4F7F\u7528 0 \u8868\u793A\u65E0\u5BBD\u5EA6\u9650\u5236\u3002",placeholder:"256"},maxResizedHeight:{name:"\u6700\u5927\u8C03\u6574\u9AD8\u5EA6",desc:"\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u7684\u6700\u5927\u9AD8\u5EA6\uFF08\u50CF\u7D20\uFF09\u3002\u4F7F\u7528 0 \u8868\u793A\u65E0\u9AD8\u5EA6\u9650\u5236\u3002",placeholder:"144"},fillResizedDimensions:{name:"\u586B\u5145\u8C03\u6574\u540E\u7684\u5C3A\u5BF8",desc:"\u542F\u7528\u540E\uFF0C\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u5C06\u5B8C\u5168\u7B26\u5408\u6700\u5927\u5BBD\u5EA6\u548C\u9AD8\u5EA6\u6307\u5B9A\u7684\u5927\u5C0F\uFF0C\u4FDD\u6301\u7EB5\u6A2A\u6BD4\u5E76\u88C1\u526A\u4EE5\u586B\u5145\u5C3A\u5BF8\u3002"},verticalAlignment:{name:"\u5782\u76F4\u5BF9\u9F50",desc:"\u9009\u62E9\u88C1\u526A\u56FE\u7247\u7684\u5782\u76F4\u5BF9\u9F50\u65B9\u5F0F\u3002",options:{top:"\u9876\u90E8",center:"\u4E2D\u5FC3",bottom:"\u5E95\u90E8"}},horizontalAlignment:{name:"\u6C34\u5E73\u5BF9\u9F50",desc:"\u9009\u62E9\u88C1\u526A\u56FE\u7247\u7684\u6C34\u5E73\u5BF9\u9F50\u65B9\u5F0F\u3002",options:{left:"\u5DE6",center:"\u4E2D\u5FC3",right:"\u53F3"}},mediaLinkFormat:{name:"\u5A92\u4F53\u94FE\u63A5\u683C\u5F0F",desc:"\u9009\u62E9\u5982\u4F55\u5728 frontmatter \u4E2D\u683C\u5F0F\u5316\u7279\u8272\u56FE\u7247\u5C5E\u6027\u3002"},frontmatterImageSourceProperties:{name:"Frontmatter \u56FE\u7247\u6765\u6E90\u5C5E\u6027",desc:"\u5728\u626B\u63CF\u6587\u6863\u4E4B\u524D\uFF0C\u7528\u4E8E\u68C0\u67E5\u56FE\u7247\u8DEF\u5F84/URL \u7684 frontmatter \u5C5E\u6027\u540D\u79F0\uFF08\u9017\u53F7\u5206\u9694\uFF09\u3002\u652F\u6301\u5B57\u7B26\u4E32\u548C YAML \u5217\u8868\u3002"},onlyUpdateExisting:{name:"\u4EC5\u5728 frontmatter \u5C5E\u6027\u5B58\u5728\u65F6\u66F4\u65B0",desc:"\u542F\u7528\u6B64\u9009\u9879\u4EE5\u4EC5\u5728 frontmatter \u5C5E\u6027\u5DF2\u5B58\u5728\u65F6\u66F4\u65B0\u5B83\u3002"},keepEmptyProperty:{name:"\u4FDD\u7559\u7A7A\u5C5E\u6027",desc:"\u542F\u7528\u540E\uFF0C\u5982\u679C\u627E\u4E0D\u5230\u7279\u8272\u56FE\u7247\uFF0Cfrontmatter \u5C5E\u6027\u5C06\u88AB\u4FDD\u7559\u4F46\u8BBE\u7F6E\u4E3A\u7A7A\u5B57\u7B26\u4E32\u3002\u7981\u7528\u540E\uFF0C\u5C5E\u6027\u5C06\u88AB\u5220\u9664\u3002"},preserveTemplateImages:{name:"\u4E0D\u6E05\u9664\u73B0\u6709\u5C5E\u6027",desc:'\u542F\u7528\u540E\uFF0C\u5982\u679C\u5728\u6587\u6863\u4E2D\u627E\u4E0D\u5230\u56FE\u7247\uFF0C\u5219\u4FDD\u7559\u73B0\u6709\u7684\u7279\u8272\u56FE\u7247\u5C5E\u6027\u3002\u7981\u7528\u540E\uFF0C\u5F53\u672A\u68C0\u6D4B\u5230\u56FE\u7247\u65F6\u6E05\u9664\u6216\u5220\u9664\u5C5E\u6027\uFF08\u53D6\u51B3\u4E8E"\u4FDD\u7559\u7A7A\u5C5E\u6027"\u8BBE\u7F6E\uFF09\u3002'},requireExclamationForYouTube:{name:"YouTube \u7F29\u7565\u56FE\u9700\u8981\u611F\u53F9\u53F7",desc:"\u5982\u679C\u542F\u7528\uFF0C\u53EA\u6709\u5E26\u6709\u611F\u53F9\u53F7\u524D\u7F00\u7684 YouTube \u94FE\u63A5\u624D\u4F1A\u88AB\u8003\u8651\u7528\u4E8E\u7F29\u7565\u56FE\u4E0B\u8F7D\u3002"},downloadExternalImages:{name:"\u5C06\u5916\u90E8\u56FE\u7247\u4E0B\u8F7D\u5230\u7F29\u7565\u56FE\u6587\u4EF6\u5939",desc:"\u5C06\u5916\u90E8\u56FE\u7247\u94FE\u63A5\u5B58\u50A8\u5728\u672C\u5730\u3002\u7981\u7528\u540E\uFF0C\u5728\u9009\u62E9\u7279\u8272\u56FE\u7247\u65F6\u8DF3\u8FC7\u8FDC\u7A0B\u56FE\u7247\u3002"},downloadYoutubeThumbnails:{name:"\u4E0B\u8F7D YouTube \u7F29\u7565\u56FE",desc:"\u5C06 YouTube \u7F29\u7565\u56FE\u5B58\u50A8\u5728\u672C\u5730\u3002\u7981\u7528\u540E\uFF0C\u5728\u9009\u62E9\u7279\u8272\u56FE\u7247\u65F6\u8DF3\u8FC7 YouTube \u94FE\u63A5\u3002"},debugMode:{name:"\u8C03\u8BD5\u6A21\u5F0F",desc:"\u542F\u7528\u8C03\u8BD5\u6A21\u5F0F\u4EE5\u5728\u63A7\u5236\u53F0\u4E2D\u8BB0\u5F55\u8BE6\u7EC6\u4FE1\u606F\u3002"},dryRun:{name:"\u8BD5\u8FD0\u884C",desc:"\u542F\u7528\u8BD5\u8FD0\u884C\u4EE5\u9632\u6B62\u5BF9\u6587\u4EF6\u8FDB\u884C\u4EFB\u4F55\u66F4\u6539\u3002"},whatsNew:{name:"Featured Image {version} \u66F4\u65B0\u5185\u5BB9",desc:"\u67E5\u770B\u6700\u65B0\u7684\u53D8\u66F4\u548C\u6539\u8FDB\u3002",buttonText:"\u67E5\u770B\u6700\u8FD1\u66F4\u65B0"}},info:{rerenderTip:'\u63D0\u793A\uFF1A\u66F4\u6539\u5BF9\u9F50\u6216\u5C3A\u5BF8\u8BBE\u7F6E\u540E\uFF0C\u4ECE\u547D\u4EE4\u9762\u677F\u8FD0\u884C"\u91CD\u65B0\u6E32\u67D3\u6240\u6709\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE"\u547D\u4EE4\uFF0C\u4EE5\u4F7F\u7528\u65B0\u8BBE\u7F6E\u66F4\u65B0\u73B0\u6709\u7F29\u7565\u56FE\u3002'}},notices:{updatingAllFiles:"\u6B63\u5728\u66F4\u65B0\u6240\u6709\u6587\u4EF6\u4E2D\u7684\u7279\u8272\u56FE\u7247...",updatingFolder:"\u6B63\u5728\u66F4\u65B0\u5F53\u524D\u6587\u4EF6\u5939\u4E2D\u7684\u7279\u8272\u56FE\u7247...",removingAllImages:"\u6B63\u5728\u4ECE\u6240\u6709\u6587\u4EF6\u4E2D\u5220\u9664\u7279\u8272\u56FE\u7247...",cleaningUpUnused:"\u6B63\u5728\u6E05\u7406\u672A\u4F7F\u7528\u7684\u56FE\u7247...",rerenderingThumbnails:"\u6B63\u5728\u91CD\u65B0\u6E32\u67D3\u6240\u6709\u7F29\u7565\u56FE...",completed:"\u5DF2\u5B8C\u6210",noActiveFile:"\u6CA1\u6709\u6D3B\u52A8\u6587\u4EF6",errorOccurred:"\u53D1\u751F\u9519\u8BEF",featureSet:"\u7279\u8272\u56FE\u7247\u5DF2\u8BBE\u7F6E",featureUpdated:"\u7279\u8272\u56FE\u7247\u5DF2\u66F4\u65B0",featureRemoved:"\u7279\u8272\u56FE\u7247\u5DF2\u5220\u9664",featureUnchanged:"\u7279\u8272\u56FE\u7247\u672A\u66F4\u6539",dryRunEnabled:"\u8BD5\u8FD0\u884C\u5DF2\u542F\u7528 - \u672A\u8FDB\u884C\u4EFB\u4F55\u66F4\u6539",filesProcessed:"\u5DF2\u5904\u7406 {count} \u4E2A\u6587\u4EF6",imagesDeleted:"\u5DF2\u5220\u9664 {count} \u4E2A\u56FE\u7247",thumbnailsRerendered:"\u5DF2\u91CD\u65B0\u6E32\u67D3 {count} \u4E2A\u7F29\u7565\u56FE"},modals:{mtimeOffsetNote:"\u63D0\u793A\uFF1A\u4E3A\u786E\u4FDD\u540C\u6B65\u670D\u52A1\u68C0\u6D4B\u5230\u66F4\u6539\uFF0C\u6587\u4EF6\u7684\u4FEE\u6539\u65F6\u95F4\u4F1A\u5411\u524D\u63A8\u8FDB\u7EA6 1.5 \u79D2\u3002"},whatsNew:{title:"Featured Image \u66F4\u65B0\u5185\u5BB9",categories:{new:"\u65B0\u589E",improved:"\u6539\u8FDB",changed:"\u53D8\u66F4",fixed:"\u4FEE\u590D"},supportMessage:"\u5982\u679C\u4F60\u89C9\u5F97 Featured Image \u5F88\u6709\u7528\uFF0C\u6B22\u8FCE\u652F\u6301\u5B83\u7684\u5F00\u53D1\u3002",supportButton:"\u652F\u6301",thanksButton:"\u8C22\u8C22\uFF01"},errors:{httpImageLinkIgnored:(g,i,e)=>`\u5DF2\u5FFD\u7565 ${g} \u4E2D\u7684 HTTP${e?` ${e}`:""} \u56FE\u7247\u94FE\u63A5\uFF1A${i}\u3002Featured Image \u4EC5\u5904\u7406 HTTPS \u94FE\u63A5\uFF1B\u8BF7\u5C06\u94FE\u63A5\u6539\u4E3A HTTPS\u3002`}}});function Le(){let g=(0,be.getLanguage)();return g&&g in we?g:"en"}var be,we,u,A=z(()=>{be=require("obsidian");re();de();ue();ge();pe();fe();we={en:se,de:oe,es:le,fr:me,ja:ce,zh:he};u=we[Le()]});var J={};X(J,{WhatsNewModal:()=>Q});var ve,Q,Z=z(()=>{ve=require("obsidian");A();Q=class extends ve.Modal{constructor(e,t,n,a){super(e);this.thanksButton=null;this.domDisposers=[];this.releaseNotes=t,this.fundingUrl=n,this.onCloseCallback=a}formatReleaseDate(e){let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}renderFormattedText(e,t){let n=(s,r)=>{let d=/==([\s\S]*?)==|\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)|\*\*([^*]+)\*\*|(https?:\/\/[^\s]+)/g,l=0,o,p=c=>{c.length>0&&r.appendText(c)};for(;(o=d.exec(s))!==null;){if(p(s.slice(l,o.index)),o[1]){let c=r.createSpan({cls:"fi-highlight"});n(o[1],c)}else if(o[2]&&o[3]){let c=r.createEl("a",{text:o[2]});c.setAttr("href",o[3]),c.setAttr("rel","noopener noreferrer"),c.setAttr("target","_blank")}else if(o[4])r.createEl("strong",{text:o[4]});else if(o[5]){let c=o[5],w="",h=c.match(/[.,;:!?)]+$/);h&&(w=h[0],c=c.slice(0,-w.length));let v=r.createEl("a",{text:c});v.setAttr("href",c),v.setAttr("rel","noopener noreferrer"),v.setAttr("target","_blank"),w&&p(w)}l=d.lastIndex}p(s.slice(l))},a=t.split(`
`);for(let s=0;s<a.length;s++)n(a[s],e),s<a.length-1&&e.createEl("br")}onOpen(){let{contentEl:e}=this;e.empty(),this.modalEl.addClass("fi-whats-new-modal"),e.createEl("h2",{text:u.whatsNew.title,cls:"fi-whats-new-header"}),this.attachCloseButtonHandler();let t=e.createDiv("fi-whats-new-scroll");this.releaseNotes.forEach(l=>{let o=t.createDiv("fi-whats-new-version");o.createEl("h3",{text:`Version ${l.version}`}),o.createEl("small",{text:this.formatReleaseDate(l.date),cls:"fi-whats-new-date"}),l.info&&l.info.split(/\n\s*\n/).forEach(w=>{let h=o.createEl("p",{cls:"fi-whats-new-info"});this.renderFormattedText(h,w)}),[{key:"new",label:u.whatsNew.categories.new},{key:"improved",label:u.whatsNew.categories.improved},{key:"changed",label:u.whatsNew.categories.changed},{key:"fixed",label:u.whatsNew.categories.fixed}].forEach(c=>{let w=l[c.key];if(!(w!=null&&w.length))return;o.createEl("h4",{text:c.label,cls:"fi-whats-new-category"});let h=o.createEl("ul",{cls:"fi-whats-new-features"});w.forEach(v=>{let x=h.createEl("li");this.renderFormattedText(x,v)})})}),e.createDiv("fi-whats-new-divider"),e.createDiv("fi-whats-new-support").createEl("p",{text:u.whatsNew.supportMessage,cls:"fi-whats-new-support-text"});let a=e.createDiv("fi-whats-new-buttons"),s=a.createEl("button",{cls:"fi-support-button-small"});s.setAttr("type","button");let r=s.createSpan({cls:"fi-support-button-icon"});r.setAttr("aria-hidden","true"),r.setText("\u2615"),s.createSpan({cls:"fi-support-button-label",text:u.whatsNew.supportButton}),this.domDisposers.push(this.addDisposableEventListener(s,"click",()=>{this.fundingUrl&&window.open(this.fundingUrl)}));let d=a.createEl("button",{text:u.whatsNew.thanksButton,cls:"mod-cta"});this.domDisposers.push(this.addDisposableEventListener(d,"click",()=>{this.close()})),this.thanksButton=d}open(){super.open(),this.thanksButton&&requestAnimationFrame(()=>{var e;(e=this.thanksButton)==null||e.focus()})}onClose(){let{contentEl:e}=this;e.empty(),this.modalEl.removeClass("fi-whats-new-modal"),this.domDisposers.length&&(this.domDisposers.forEach(t=>{try{t()}catch(n){}}),this.domDisposers=[]),this.onCloseCallback&&this.onCloseCallback()}attachCloseButtonHandler(){let e=this.modalEl.querySelector(".modal-close-button");if(!e)return;let t=n=>{n.preventDefault(),this.close()};this.domDisposers.push(this.addDisposableEventListener(e,"click",t)),this.domDisposers.push(this.addDisposableEventListener(e,"pointerdown",t))}addDisposableEventListener(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}}});var ee={};X(ee,{compareVersions:()=>Re,getLatestReleaseNotes:()=>xe,getReleaseNotesBetweenVersions:()=>Ee,isReleaseAutoDisplayEnabled:()=>Pe});function Ee(g,i){let e=N.findIndex(s=>s.version===g),t=N.findIndex(s=>s.version===i);if(e===-1||t===-1)return xe();let n=Math.min(e,t),a=Math.max(e,t);return N.slice(n,a+1)}function xe(g=5){return N.slice(0,g)}function Re(g,i){let e=g.split(".").map(Number),t=i.split(".").map(Number);for(let n=0;n<Math.max(e.length,t.length);n++){let a=e[n]||0,s=t[n]||0;if(a>s)return 1;if(a<s)return-1}return 0}function Pe(g){let i=N.find(e=>e.version===g);return i?i.showOnUpdate!==!1:!0}var N,te=z(()=>{N=[{version:"1.2.4",date:"2026-01-07",showOnUpdate:!0,new:[],improved:[],changed:["Removed the setting 'Optimize settings for Notebook Navigator' since this plugin is no longer needed for Notebook Navigator."],fixed:[]},{version:"1.2.3",date:"2025-12-16",showOnUpdate:!0,new:["New setting: ==Frontmatter image source properties==. Comma-separated list of frontmatter properties to check for image paths/URLs before scanning the document. Use this setting if you have links to external images in one of your properties and want to use that in Notebook Navigator.","==AVIF support==: Featured Image will now properly read and process AVIF images.","==SVG support==: Featured Image will now properly read and process SVG images."],improved:["Settings now support the new ==SettingGroup API== in Obsidian 1.11 and later. Settings groups are now clearly outlined."],changed:[],fixed:[]}]});var Me={};X(Me,{default:()=>G});module.exports=ze(Me);var F=require("obsidian");var T=require("obsidian");A();var M=["png","jpg","jpeg","gif","webp","svg","avif"],L={showNotificationsOnUpdate:!0,frontmatterProperty:"feature",thumbnailsFolder:"thumbnails",excludedFolders:[],createResizedThumbnail:!0,resizedFrontmatterProperty:"thumbnail",maxResizedWidth:256,maxResizedHeight:144,fillResizedDimensions:!1,resizedVerticalAlign:"top",resizedHorizontalAlign:"center",frontmatterImageSourceProperties:[],mediaLinkFormat:"plain",useMediaLinks:!1,onlyUpdateExisting:!1,keepEmptyProperty:!1,preserveTemplateImages:!1,requireExclamationForYouTube:!0,downloadExternalImages:!0,downloadYoutubeThumbnails:!0,debugMode:!1,dryRun:!1,lastShownVersion:""},$=class extends T.PluginSettingTab{constructor(i,e){super(i,e),this.plugin=e,this.supportsSettingGroups()&&(this.icon="wallpaper")}display(){let{containerEl:i}=this;i.empty();let e=this.supportsSettingGroups(),t=(m,f)=>{let b;!e&&m&&(b=new T.Setting(i).setName(m).setHeading().settingEl);let y=i.createDiv(f);if(e){y.addClass("setting-group");let I=new T.SettingGroup(y).addClass("setting-group");return m&&I.setHeading(m),{rootEl:y,headingEl:b,addSetting:U=>{let ne;return I.addSetting(ae=>{ne=ae,U(ae)}),ne}}}return{rootEl:y,headingEl:b,addSetting:I=>{let U=new T.Setting(y);return I(U),U}}},n=t(void 0),a=this.plugin.manifest.version;n.addSetting(m=>{m.setName(u.settings.items.whatsNew.name.replace("{version}",a)).setDesc(u.settings.items.whatsNew.desc).addButton(f=>f.setButtonText(u.settings.items.whatsNew.buttonText).onClick(()=>{(async()=>{let{WhatsNewModal:b}=await Promise.resolve().then(()=>(Z(),J)),{getLatestReleaseNotes:y}=await Promise.resolve().then(()=>(te(),ee)),I=this.plugin.manifest.fundingUrl;new b(this.app,y(),I).open()})()}))}),n.addSetting(m=>{m.setName(u.settings.items.showNotifications.name).setDesc(u.settings.items.showNotifications.desc).addToggle(f=>{f.setValue(this.plugin.settings.showNotificationsOnUpdate).onChange(async b=>{this.plugin.settings.showNotificationsOnUpdate=b,await this.plugin.saveSettings()})})}),n.addSetting(m=>{m.setName(u.settings.items.frontmatterProperty.name).setDesc(u.settings.items.frontmatterProperty.desc).addText(f=>f.setPlaceholder(L.frontmatterProperty).setValue(this.plugin.settings.frontmatterProperty).onChange(async b=>{this.plugin.settings.frontmatterProperty=b,await this.plugin.saveSettings()}))}),n.addSetting(m=>{m.setName(u.settings.items.thumbnailsFolder.name).setDesc(u.settings.items.thumbnailsFolder.desc).addText(f=>f.setPlaceholder(L.thumbnailsFolder).setValue(this.plugin.settings.thumbnailsFolder).onChange(async b=>{let y=b.trim();y?this.plugin.settings.thumbnailsFolder=y.replace(/\/$/,""):this.plugin.settings.thumbnailsFolder=L.thumbnailsFolder,await this.plugin.saveSettings()}))}),n.addSetting(m=>{m.setName(u.settings.items.excludedFolders.name).setDesc(u.settings.items.excludedFolders.desc).addTextArea(f=>f.setValue(this.plugin.settings.excludedFolders.join(",")).onChange(async b=>{this.plugin.settings.excludedFolders=b.split(",").map(y=>y.trim().replace(/\/$/,"")),await this.plugin.saveSettings()}))});let s=t(u.settings.headings.frontmatter);s.addSetting(m=>{m.setName(u.settings.items.frontmatterImageSourceProperties.name).setDesc(u.settings.items.frontmatterImageSourceProperties.desc).addTextArea(f=>f.setValue(this.plugin.settings.frontmatterImageSourceProperties.join(",")).onChange(async b=>{let y=b.split(",").map(I=>I.trim()).filter(Boolean);this.plugin.settings.frontmatterImageSourceProperties=Array.from(new Set(y)),await this.plugin.saveSettings()}))}),s.addSetting(m=>{m.setName(u.settings.items.mediaLinkFormat.name).setDesc(u.settings.items.mediaLinkFormat.desc).addDropdown(f=>f.addOption("plain",`${this.plugin.settings.frontmatterProperty}: image.png`).addOption("wiki",`${this.plugin.settings.frontmatterProperty}: [[image.png]]`).addOption("embed",`${this.plugin.settings.frontmatterProperty}: ![[image.png]]`).setValue(this.plugin.settings.mediaLinkFormat).onChange(async b=>{this.plugin.settings.mediaLinkFormat=b,this.plugin.settings.useMediaLinks=b!=="plain",await this.plugin.saveSettings()}))}),s.addSetting(m=>{m.setName(u.settings.items.onlyUpdateExisting.name).setDesc(u.settings.items.onlyUpdateExisting.desc).addToggle(f=>{f.setValue(this.plugin.settings.onlyUpdateExisting).onChange(async b=>{this.plugin.settings.onlyUpdateExisting=b,await this.plugin.saveSettings()})})}),s.addSetting(m=>{m.setName(u.settings.items.keepEmptyProperty.name).setDesc(u.settings.items.keepEmptyProperty.desc).addToggle(f=>{f.setValue(this.plugin.settings.keepEmptyProperty).onChange(async b=>{this.plugin.settings.keepEmptyProperty=b,await this.plugin.saveSettings()})})}),s.addSetting(m=>{m.setName(u.settings.items.preserveTemplateImages.name).setDesc(u.settings.items.preserveTemplateImages.desc).addToggle(f=>{f.setValue(this.plugin.settings.preserveTemplateImages).onChange(async b=>{this.plugin.settings.preserveTemplateImages=b,await this.plugin.saveSettings()})})});let r=t(u.settings.headings.externalMedia);r.addSetting(m=>{m.setName(u.settings.items.downloadExternalImages.name).setDesc(u.settings.items.downloadExternalImages.desc).addToggle(f=>f.setValue(this.plugin.settings.downloadExternalImages).onChange(async b=>{this.plugin.settings.downloadExternalImages=b,await this.plugin.saveSettings()}))}),r.addSetting(m=>{m.setName(u.settings.items.downloadYoutubeThumbnails.name).setDesc(u.settings.items.downloadYoutubeThumbnails.desc).addToggle(f=>f.setValue(this.plugin.settings.downloadYoutubeThumbnails).onChange(async b=>{this.plugin.settings.downloadYoutubeThumbnails=b,await this.plugin.saveSettings()}))}),r.addSetting(m=>{m.setName(u.settings.items.requireExclamationForYouTube.name).setDesc(u.settings.items.requireExclamationForYouTube.desc).addToggle(f=>f.setValue(this.plugin.settings.requireExclamationForYouTube).onChange(async b=>{this.plugin.settings.requireExclamationForYouTube=b,await this.plugin.saveSettings()}))});let d=t(u.settings.headings.resizeThumbnail,"resize-thumbnail-settings"),l=d.addSetting(m=>{m.setName(u.settings.items.resizeFeatureImage.name).setDesc(u.settings.items.resizeFeatureImage.desc).addToggle(f=>f.setValue(this.plugin.settings.createResizedThumbnail).onChange(async b=>{this.plugin.settings.createResizedThumbnail=b,await this.plugin.saveSettings(),v(b)}))}),o=d.rootEl.createDiv("thumbnail-settings");l.settingEl.after(o);let p=new T.Setting(o).setName(u.settings.items.resizedThumbnailProperty.name).setDesc(u.settings.items.resizedThumbnailProperty.desc).addText(m=>m.setPlaceholder(u.settings.items.resizedThumbnailProperty.placeholder).setValue(this.plugin.settings.resizedFrontmatterProperty).onChange(async f=>{this.plugin.settings.resizedFrontmatterProperty=f||"thumbnail",await this.plugin.saveSettings()}));new T.Setting(o).setName(u.settings.items.maxResizedWidth.name).setDesc(u.settings.items.maxResizedWidth.desc).addText(m=>m.setPlaceholder(String(L.maxResizedWidth)).setValue(String(this.plugin.settings.maxResizedWidth)).onChange(async f=>{let b=parseInt(f,10);this.plugin.settings.maxResizedWidth=Number.isNaN(b)?L.maxResizedWidth:b,await this.plugin.saveSettings()})),new T.Setting(o).setName(u.settings.items.maxResizedHeight.name).setDesc(u.settings.items.maxResizedHeight.desc).addText(m=>m.setPlaceholder(String(L.maxResizedHeight)).setValue(String(this.plugin.settings.maxResizedHeight)).onChange(async f=>{let b=parseInt(f,10);this.plugin.settings.maxResizedHeight=Number.isNaN(b)?L.maxResizedHeight:b,await this.plugin.saveSettings()})),new T.Setting(o).setName(u.settings.items.fillResizedDimensions.name).setDesc(u.settings.items.fillResizedDimensions.desc).addToggle(m=>m.setValue(this.plugin.settings.fillResizedDimensions).onChange(async f=>{this.plugin.settings.fillResizedDimensions=f,await this.plugin.saveSettings(),x(f)}));let c=o.createDiv("alignment-settings");new T.Setting(c).setName(u.settings.items.verticalAlignment.name).setDesc(u.settings.items.verticalAlignment.desc).addDropdown(m=>m.addOption("top",u.settings.items.verticalAlignment.options.top).addOption("center",u.settings.items.verticalAlignment.options.center).addOption("bottom",u.settings.items.verticalAlignment.options.bottom).setValue(this.plugin.settings.resizedVerticalAlign).onChange(async f=>{this.plugin.settings.resizedVerticalAlign=f,await this.plugin.saveSettings()})),new T.Setting(c).setName(u.settings.items.horizontalAlignment.name).setDesc(u.settings.items.horizontalAlignment.desc).addDropdown(m=>m.addOption("left",u.settings.items.horizontalAlignment.options.left).addOption("center",u.settings.items.horizontalAlignment.options.center).addOption("right",u.settings.items.horizontalAlignment.options.right).setValue(this.plugin.settings.resizedHorizontalAlign).onChange(async f=>{this.plugin.settings.resizedHorizontalAlign=f,await this.plugin.saveSettings()})),o.createDiv("thumbnail-info").createEl("p",{text:u.settings.info.rerenderTip,cls:"setting-item-description"});let h=t(u.settings.headings.advanced,"advanced-settings");h.addSetting(m=>{m.setName(u.settings.items.debugMode.name).setDesc(u.settings.items.debugMode.desc).addToggle(f=>f.setValue(this.plugin.settings.debugMode).onChange(async b=>{this.plugin.settings.debugMode=b,await this.plugin.saveSettings()}))}),h.addSetting(m=>{m.setName(u.settings.items.dryRun.name).setDesc(u.settings.items.dryRun.desc).addToggle(f=>f.setValue(this.plugin.settings.dryRun).onChange(async b=>{this.plugin.settings.dryRun=b,await this.plugin.saveSettings()}))});let v=m=>{p.settingEl.style.display=m?"":"none",o.style.display=m?"block":"none",x(m&&this.plugin.settings.fillResizedDimensions)},x=m=>{c.style.display=m?"block":"none"};v(this.plugin.settings.createResizedThumbnail),x(this.plugin.settings.createResizedThumbnail&&this.plugin.settings.fillResizedDimensions)}supportsSettingGroups(){return typeof T.SettingGroup=="function"&&typeof T.requireApiVersion=="function"&&(0,T.requireApiVersion)("1.11.0")}};var V=require("obsidian");A();var B=class extends V.Modal{constructor(i,e,t,n,a=!0){super(i),this.title=e,this.message=t,this.onSubmit=n,this.showPreservationNote=a}onOpen(){let{contentEl:i,titleEl:e}=this;e.setText(this.title),i.empty(),i.createEl("p",{text:this.message}),this.showPreservationNote&&i.createEl("div",{cls:"featured-image-info"}).createEl("p",{text:u.modals.mtimeOffsetNote,cls:"featured-image-info-text"}),new V.Setting(i).addButton(t=>t.setButtonText("Cancel").onClick(()=>{this.close(),this.onSubmit(!1)})).addButton(t=>t.setButtonText("Proceed").setCta().onClick(()=>{this.close(),this.onSubmit(!0)}))}onClose(){let{contentEl:i}=this;i.empty()}};A();var P=require("obsidian");A();var O=require("obsidian"),H=g=>g instanceof O.TFile,R=(g,i,e)=>{let t=i.trim(),n=g.metadataCache.getFirstLinkpathDest(t,e.path);if(H(n))return n.path;let a=(0,O.normalizePath)(t),s=g.vault.getAbstractFileByPath(a);if(H(s))return s.path};var k=g=>{try{return new URL(g).protocol==="https:"}catch(i){return!1}};var Y=class{constructor(i,e,t){this.app=i;this.deps=t;this.settings=e,this.compileRegexPatterns()}setSettings(i){this.settings=i,this.compileRegexPatterns()}async getFeatureFromFrontmatterSources(i){let e=this.getFrontmatterSourceProperties();if(e.length===0)return;let t=this.app.metadataCache.getFileCache(i),n=t==null?void 0:t.frontmatter;if(n)for(let a of e){let s=n[a],r=this.extractFrontmatterStringValues(s);for(let d of r){let l=this.extractFrontmatterImageTarget(d);if(!l)continue;let o=await this.resolveFrontmatterImageTarget(l,i,a);if(o)return o}}}getFrontmatterImageInfo(i,e){var a;let t=this.app.metadataCache.getFileCache(i),n=(a=t==null?void 0:t.frontmatter)==null?void 0:a[e];return this.parseFrontmatterImage(n,i)}isFrontmatterPathEqual(i,e){if(!(i!=null&&i.rawValue)||!e)return!1;if(k(e))return i.resolvedPath===e;let t=(0,P.normalizePath)(e);return(i.isResolved?i.resolvedPath:(0,P.normalizePath)(i.rawPath))===t}async getFeatureFromDocument(i,e,t){var r,d,l;let n=i;if(i.startsWith(`---
`)){let o=i.indexOf(`
---
`,4);o!==-1&&(n=i.substring(o+5))}let a=n.split(`
`),s=this.createCardLinkProcessor(o=>this.processAutoCardLinkImage(o,e));for(let o of a){let p=await s.consume(o);if(p.result!==void 0)return p.result;if(p.handled)continue;let c=this.combinedLineRegex.exec(o);if(c){if((r=c.groups)!=null&&r.youtube){let w=this.getVideoId(c.groups.youtube);if(w){let h=await this.deps.downloadYoutubeThumbnail(w,t);if(h)return h}continue}if((d=c.groups)!=null&&d.wikiImage){let w=this.safeDecodeLinkComponent(c.groups.wikiImage),h=R(this.app,w,e);if(h)return h;this.deps.errorLog(`Local image not found for featured image: ${w} (referenced in ${e.path})`);continue}if((l=c.groups)!=null&&l.mdImage){let w=this.safeDecodeLinkComponent(c.groups.mdImage),v=this.stripMarkdownImageTitle(w).trim();if(this.isHttpUrl(v)){this.logHttpImageWarning(e.path,v);continue}if(k(v)){let m=await this.deps.downloadExternalImage(v);if(m)return m;continue}let x=R(this.app,v,e);if(x)return x;this.deps.errorLog(`Local image not found for featured image: ${v} (referenced in ${e.path})`);continue}}}if(this.settings.preserveTemplateImages&&t)return this.deps.debugLog("No new image found, preserving existing featured image:",t),t}async collectFileReferences(i,e){var t,n;try{let a=this.app.metadataCache.getFileCache(i);if(a!=null&&a.frontmatter){let l=a.frontmatter[this.settings.frontmatterProperty];if(l&&this.addNormalizedPath(l,e,i),this.settings.createResizedThumbnail){let o=a.frontmatter[this.settings.resizedFrontmatterProperty];o&&this.addNormalizedPath(o,e,i)}for(let o of this.getFrontmatterSourceProperties()){let p=a.frontmatter[o];this.collectFrontmatterSourceReferences(p,e,i)}}let r=(await this.app.vault.cachedRead(i)).split(`
`),d=this.createCardLinkProcessor(l=>{let o=this.extractAutoCardLinkLocalPath(l);o&&this.addNormalizedPath(o,e,i)});for(let l of r){if((await d.consume(l)).handled)continue;this.combinedLineGlobalRegex.lastIndex=0;let p;for(;(p=this.combinedLineGlobalRegex.exec(l))!==null;)if((t=p.groups)!=null&&t.wikiImage&&this.addNormalizedPath(p.groups.wikiImage,e,i),(n=p.groups)!=null&&n.mdImage){let c=this.safeDecodeLinkComponent(p.groups.mdImage),h=this.stripMarkdownImageTitle(c).trim();if(this.isHttpUrl(h)){this.logHttpImageWarning(i.path,h);continue}k(h)||this.addNormalizedPath(h,e,i)}}}catch(a){this.deps.errorLog(`Error processing references in ${i.path}:`,a)}}parseFrontmatterImage(i,e){let t=this.extractFrontmatterStringValues(i);for(let n of t){let a=this.parseFrontmatterImageString(n,e);if(a)return a}}extractFrontmatterStringValues(i){return typeof i=="string"?[i]:Array.isArray(i)?i.filter(e=>typeof e=="string"):[]}parseFrontmatterImageString(i,e){let t=i.trim();if(!t)return;let n=this.extractWikiLinkTarget(t),a=n!=null?n:t;a=this.stripLinkMetadata(a);let s=a,r=!1;if(a){if(this.isHttpUrl(a))return this.logHttpImageWarning(e.path,a),{rawValue:t,rawPath:a,resolvedPath:a,isResolved:!1};if(k(a))r=!0,s=a;else{let d=R(this.app,a,e);d?(s=(0,P.normalizePath)(d),r=!0):s=(0,P.normalizePath)(a)}}return{rawValue:t,rawPath:a,resolvedPath:s,isResolved:r}}extractFrontmatterImageTarget(i){var a;let e=i.trim();if(!e)return;let t=this.extractWikiLinkTarget(e);if(t)return{kind:"wiki",target:t};this.markdownImageRegex.lastIndex=0;let n=this.markdownImageRegex.exec(e);return(a=n==null?void 0:n.groups)!=null&&a.mdImage?{kind:"md",target:n.groups.mdImage}:{kind:"plain",target:e}}async resolveFrontmatterImageTarget(i,e,t){let n=this.normalizeFrontmatterImageTarget(i);if(!n)return;if(this.isHttpUrl(n)){let r=t?`frontmatter:${t}`:void 0;this.logHttpImageWarning(e.path,n,r);return}if(k(n)){let r=await this.deps.downloadExternalImage(n);return r||void 0}let a=R(this.app,n,e);if(a){if(!this.isSupportedImagePath(a)){let r=t?` (from ${t})`:"";this.deps.debugLog(`Frontmatter source resolved to a non-image: ${a} (referenced in ${e.path})${r}`);return}return a}let s=t?` (from ${t})`:"";this.deps.debugLog(`Local image not found for featured image: ${n} (referenced in ${e.path})${s}`)}collectFrontmatterSourceReferences(i,e,t){let n=this.extractFrontmatterStringValues(i);for(let a of n){let s=this.extractFrontmatterImageTarget(a);if(!s)continue;let r=this.normalizeFrontmatterImageTarget(s);!r||this.isHttpUrl(r)||k(r)||this.addNormalizedPath(r,e,t)}}async processAutoCardLinkImage(i,e){i=i.trim();let t=this.extractAutoCardLinkLocalPath(i);if(t){let a=R(this.app,t,e);if(!a){this.deps.errorLog(`Local Auto Card Link image not found: ${t} (referenced in ${e.path})`);return}return a}let n=i.trim();if(this.isHttpUrl(n)){this.logHttpImageWarning(e.path,n,"Auto Card Link");return}if(!k(n)){this.deps.errorLog("Invalid Auto Card Link URL:",n);return}return await this.deps.downloadExternalImage(n,"autocardlink")}extractAutoCardLinkLocalPath(i){if(!(i.startsWith('"')&&i.endsWith('"')))return;let e=i.slice(1,-1).trim();return e=e.replace(/^\[\[|\]\]$/g,""),e}addNormalizedPath(i,e,t){let n=this.extractWikiLinkTarget(i),a=this.stripLinkMetadata(n!=null?n:i),s=this.safeDecodeLinkComponent(a).trim();if(!s||this.isHttpUrl(s)||k(s))return;let r=R(this.app,s,t);if(r){this.isSupportedImagePath(r)&&e.add((0,P.normalizePath)(r));return}this.isSupportedImagePath(s)&&e.add((0,P.normalizePath)(s))}getFrontmatterSourceProperties(){let i=this.settings.frontmatterImageSourceProperties.map(e=>e.trim()).filter(Boolean);return Array.from(new Set(i))}extractWikiLinkTarget(i){let e=i.match(/!?\[\[(.*?)\]\]/);return e?e[1]:void 0}stripLinkMetadata(i){return i.split("|")[0].split("#")[0].trim()}normalizeFrontmatterImageTarget(i){let e=this.stripLinkMetadata(i.target);return e=this.safeDecodeLinkComponent(e),i.kind==="md"&&(e=this.stripMarkdownImageTitle(e).trim()),e}isSupportedImagePath(i){var n;let t=(n=i.split("?")[0].split(".").pop())==null?void 0:n.toLowerCase();return t?M.includes(t):!1}compileRegexPatterns(){let i=M.join("|"),e=`!\\[\\[(?<wikiImage>[^\\]|#]+\\.(${i}))(?:[#|][^\\]]*)?\\]\\]`,t=`!\\[.*?\\]\\((?<mdImage>(?:https?:\\/\\/(?:[^)(]|\\([^)(]*\\))+|[^)(]+\\.(${i})))\\)`,a=[`${this.settings.requireExclamationForYouTube?"!":"!?"}\\[.*?\\]\\((?<youtube>https?:\\/\\/(?:www\\.)?(?:youtube\\.com|youtu\\.be)\\/\\S+)\\)`,e,t].join("|");this.combinedLineRegex=new RegExp(a,"i"),this.combinedLineGlobalRegex=new RegExp(a,"gi"),this.markdownImageRegex=new RegExp(t,"i"),this.autoCardImageRegex=/image:\s*(?<autoCardImage>.+?)(?:\n|$)/i,this.codeBlockStartRegex=/^[\s]*```[\s]*(\w+)?[\s]*$/}safeDecodeLinkComponent(i){try{return decodeURIComponent(i)}catch(e){return i}}isHttpUrl(i){return i.trim().toLowerCase().startsWith("http://")}logHttpImageWarning(i,e,t){this.deps.errorLog(u.errors.httpImageLinkIgnored(i,e,t))}stripMarkdownImageTitle(i){let e=i.trim();if(!e)return e;let n=/\s+(?:"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|\((?:[^)\\]|\\.)*\))\s*$/.exec(e);return n&&e.slice(0,n.index).trimEnd()||e}getVideoId(i){try{let e=new URL(i),t=e.hostname.toLowerCase(),n=e.pathname,a=e.searchParams,s=t.replace("m.youtube.com","youtube.com");if(t.includes("youtu.be"))return n.slice(1);if(s.includes("youtube.com")){if(n==="/watch")return a.get("v");if(n.startsWith("/embed/")||n.startsWith("/v/")||n.startsWith("/shorts/"))return n.split("/")[2];if(n==="/playlist")return a.get("v")}return null}catch(e){return this.deps.errorLog("Invalid YouTube URL:",i),null}}createCardLinkProcessor(i){let e=!1,t="",n="";return{consume:async a=>{var r,d;let s=this.codeBlockStartRegex.exec(a);if(s){if(!e)return e=!0,t=(s[1]||"").toLowerCase(),n="",{handled:!0};if(t==="cardlink"){let l=this.autoCardImageRegex.exec(n),o=(d=(r=l==null?void 0:l.groups)==null?void 0:r.autoCardImage)==null?void 0:d.trim();if(e=!1,t="",n="",o){let p=await i(o);if(p!==void 0)return{handled:!0,result:p}}return{handled:!0}}return e=!1,t="",n="",{handled:!0}}return e&&t==="cardlink"?(n+=`${a}
`,{handled:!0}):{handled:!1}}}}};var E=require("obsidian");var Fe=require("crypto"),D=g=>(0,Fe.createHash)("md5").update(g).digest("hex");var W=class{constructor(i,e,t){this.app=i;this.deps=t;this.settings=e,this.canvas=e.createResizedThumbnail?document.createElement("canvas"):null}setSettings(i){this.settings=i,i.createResizedThumbnail&&!this.canvas?this.canvas=document.createElement("canvas"):i.createResizedThumbnail||(this.canvas=null)}async createThumbnail(i){if(!(!this.settings.createResizedThumbnail||this.settings.maxResizedWidth===0&&this.settings.maxResizedHeight===0)){if(i.toLowerCase().endsWith(".svg"))return i;try{let e=D(`${this.settings.maxResizedWidth}_${this.settings.maxResizedHeight}_${this.settings.fillResizedDimensions}`).substring(0,8),n=`${D(i)}_${e}`,a=(0,E.normalizePath)(`${this.settings.thumbnailsFolder}/resized`),s=`${a}/${n}.webp`;if(await this.app.vault.adapter.exists(s))return this.deps.debugLog("Resized thumbnail already exists:",s),s;if(this.settings.dryRun)return this.deps.debugLog("Dry run: Skipping thumbnail creation, using mock path"),s;if(!await this.app.vault.adapter.exists(i)){this.deps.errorLog("Source image not found:",i);return}await this.app.vault.adapter.exists(a)||await this.app.vault.adapter.mkdir(a);let r=await this.app.vault.adapter.readBinary(i),d=new Blob([r]),l=URL.createObjectURL(d);try{let o=await this.loadImage(l),p=o.naturalWidth||o.width||0,c=o.naturalHeight||o.height||0;if(p<=0||c<=0){this.deps.errorLog("Unable to determine source image dimensions:",i);return}let{width:w,height:h}=this.calculateThumbnailDimensions(p,c,this.settings.maxResizedWidth,this.settings.maxResizedHeight,this.settings.fillResizedDimensions),v=await this.resizeImage(o,w,h,this.settings.fillResizedDimensions);return await this.app.vault.adapter.writeBinary(s,v),s}finally{URL.revokeObjectURL(l)}}catch(e){this.deps.errorLog("Error creating thumbnail:",e);return}}}async deleteOrphanedThumbnail(i,e){if(!i)return;let t=(0,E.normalizePath)(i),n=(0,E.normalizePath)(`${this.settings.thumbnailsFolder}/resized`);if(!t.startsWith(n)||!await this.app.vault.adapter.exists(i))return;if(!await this.isThumbnailUsedElsewhere(i,e)){let s=this.app.vault.getAbstractFileByPath((0,E.normalizePath)(i));if(s instanceof E.TFile)try{await this.app.fileManager.trashFile(s),this.deps.debugLog("Deleted orphaned thumbnail:",i)}catch(r){this.deps.errorLog("Failed to delete orphaned thumbnail:",i,r)}else this.deps.debugLog("Thumbnail not found when attempting to trash:",i)}}loadImage(i){return new Promise((e,t)=>{let n=new Image;n.onload=()=>e(n),n.onerror=a=>t(a),n.src=i})}calculateThumbnailDimensions(i,e,t,n,a){let s=i,r=e;if(t===0&&n===0)return{width:s,height:r};if(a&&t>0&&n>0)return{width:t,height:n};let d=i/e;return t>0&&n>0?(i>t||e>n)&&(t/n>d?(r=n,s=Math.round(r*d)):(s=t,r=Math.round(s/d))):t>0?i>t&&(s=t,r=Math.round(s/d)):n>0&&e>n&&(r=n,s=Math.round(r*d)),{width:s,height:r}}async resizeImage(i,e,t,n){let a=this.ensureCanvas(),s=a.getContext("2d");if(!s)throw new Error("Failed to get 2D context for thumbnail resize");a.width=e,a.height=t;let r=0,d=0,l=i.naturalWidth||i.width,o=i.naturalHeight||i.height,p=l,c=o;if(n&&e>0&&t>0){let w=l/o,h=e/t;if(w>h)switch(p=o*h,this.settings.resizedHorizontalAlign){case"left":r=0;break;case"right":r=l-p;break;case"center":default:r=(l-p)/2;break}else if(w<h)switch(c=l/h,this.settings.resizedVerticalAlign){case"top":d=0;break;case"bottom":d=o-c;break;case"center":default:d=(o-c)/2;break}}return s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(i,r,d,p,c,0,0,e,t),new Promise((w,h)=>{a.toBlob(v=>{if(!v){h(new Error("Failed to create blob from canvas"));return}let x=new FileReader;x.onloadend=()=>{x.result instanceof ArrayBuffer?w(x.result):h(new Error("Failed to convert blob to array buffer"))},x.onerror=h,x.readAsArrayBuffer(v)},"image/webp",.85)})}ensureCanvas(){return this.canvas||(this.canvas=document.createElement("canvas")),this.canvas}async isThumbnailUsedElsewhere(i,e){if(!i)return!1;let t=(0,E.normalizePath)(i),n=this.app.vault.getMarkdownFiles();for(let a of n){if(e&&a.path===e.path)continue;let s=this.app.metadataCache.getFileCache(a);if(s!=null&&s.frontmatter){let r=s.frontmatter[this.settings.resizedFrontmatterProperty];if(r){let d=r.match(/!?\[\[(.*?)\]\]/),l=d?d[1]:r;if((0,E.normalizePath)(l)===t)return!0}}}return!1}};var S=require("obsidian");var Ae=1500;async function C(g,i,e,t){var s,r;if(t.dryRun)return;let n=Math.max((s=t.offsetMs)!=null?s:Ae,1),a=e+n;try{let d=await g.vault.read(i);await g.vault.modify(i,d,{mtime:a})}catch(d){let l=(r=t.context)!=null?r:"Failed to adjust modification time";t.errorLog(`${l} for ${i.path}:`,d)}}var j=class{constructor(i,e,t){this.app=i;this.deps=t;this.settings=e}setSettings(i){this.settings=i}async cleanupUnusedImages(i){this.deps.debugLog("Starting cleanup of unused images"),new S.Notice("Scanning for unused images...");let e=0,t=0,n=0,a=0,s=new Set,r=new Set,d=new Set,l=new Set,o=new Set;try{await this.collectImageFiles(s,r,d,l),this.deps.debugLog(`Collected image files:
                - External: ${s.size}
                - YouTube: ${r.size}
                - Auto Card: ${d.size}
                - Resized Thumbnails: ${l.size}`),await this.buildReferenceMap(o),this.deps.debugLog(`Found ${o.size} unique file references in notes`);let p=this.findUnusedFiles(s,o),c=this.findUnusedFiles(r,o),w=this.findUnusedFiles(d,o),h=this.findUnusedFiles(l,o);e=p.size,t=c.size,n=w.size,a=h.size,this.deps.debugLog(`Unused images detected:
                - External: ${e}
                - YouTube: ${t}
                - Auto Card: ${n}
                - Resized Thumbnails: ${a}`);let v=e+t+n+a;if(v===0){new S.Notice("No unused images found.");return}if(!await i("Remove unused images",`Found ${v} unused images. Do you want to delete these files?`,!1)){new S.Notice("Cleanup cancelled.");return}if(this.settings.dryRun){this.deps.debugLog("Dry run: Would delete unused files"),new S.Notice(`Dry run: Would delete ${v} unused files.`);return}new S.Notice(`Deleting ${v} unused files...`);let m=[...p,...c,...w,...h],f=await this.calculateFileSizes(m),b=await this.deleteUnusedFiles(m),y=(f/(1024*1024)).toFixed(2);new S.Notice(`Cleanup complete. Deleted ${b} unused files (${y} MB).`)}catch(p){this.deps.errorLog("Error during image cleanup:",p),new S.Notice("Error during image cleanup. Check console for details.")}}async rerenderAllResizedThumbnails(i){if(!this.settings.createResizedThumbnail){new S.Notice("Resized thumbnails are not enabled in settings.");return}if(!await i.confirm("Re-render all resized thumbnails","This will re-render all resized thumbnails based on your current settings (size, alignment, etc.). This operation may take some time depending on the number of images. Proceed?"))return;if(!this.deps.thumbnailService){this.deps.errorLog("Thumbnail service not initialized, unable to re-render thumbnails.");return}i.startBulkUpdate(),new S.Notice(`Starting ${this.settings.dryRun?"dry run of ":""}re-rendering of all resized thumbnails...`);let t=this.app.vault.getMarkdownFiles(),n=0,a=0,s=0,r=Date.now();try{let d=[];for(let p of t){let c=i.getFeatureFromFrontmatter(p);c&&(d.push({file:p,feature:c}),n++)}let l=(0,S.normalizePath)(`${this.settings.thumbnailsFolder}/resized`);if(await this.app.vault.adapter.exists(l))try{let p=await this.app.vault.adapter.list(l);if(!this.settings.dryRun)for(let c of p.files)await this.deps.trashFileAtPath(c);this.deps.debugLog(`Cleared ${p.files.length} existing thumbnails from ${l}`)}catch(p){this.deps.errorLog(`Error accessing resized folder: ${l}`,p)}let o=5;for(let p=0;p<d.length;p+=o){let c=d.slice(p,p+o),w=await Promise.all(c.map(async({file:x,feature:m})=>{try{let f=x.stat.mtime,b=await this.deps.thumbnailService.createThumbnail(m);return b?(await i.updateFrontmatter(x,m,b),await C(this.app,x,f,{dryRun:this.settings.dryRun,errorLog:this.deps.errorLog,context:"Failed to adjust modification time"}),this.deps.debugLog(`THUMBNAIL UPDATED
- File: ${x.path}
- Feature: ${m}
- New thumbnail: ${b}`),!0):!1}catch(f){return this.deps.errorLog(`Error re-rendering thumbnail for ${x.path}:`,f),!1}})),h=w.filter(x=>x).length;a+=h,s+=w.length-h;let v=Date.now();if(v-r>=5e3){let m=`Re-rendering thumbnails: ${Math.min(p+c.length,n)}/${n} processed. Updated: ${a}`;s>0&&(m+=`. Errors: ${s}`),new S.Notice(m),r=v}}}finally{i.endBulkUpdate();let d=`Re-rendering complete. ${a} thumbnails were updated`;s>0&&(d+=`. There were ${s} errors.`),new S.Notice(d)}}async collectImageFiles(i,e,t,n){let a=(0,S.normalizePath)(this.settings.thumbnailsFolder);if(!await this.app.vault.adapter.exists(a)){this.deps.debugLog(`Thumbnail folder ${a} does not exist`);return}let s=`${a}/external`,r=`${a}/youtube`,d=`${a}/autocardlink`,l=`${a}/resized`;await this.app.vault.adapter.exists(s)&&await this.collectFilesInFolder(s,i,".failed.png"),await this.app.vault.adapter.exists(r)&&await this.collectFilesInFolder(r,e,".failed.png"),await this.app.vault.adapter.exists(d)&&await this.collectFilesInFolder(d,t,".failed.png"),await this.app.vault.adapter.exists(l)&&await this.collectFilesInFolder(l,n,".failed.png")}async collectFilesInFolder(i,e,t=null){try{let n=await this.app.vault.adapter.list(i);for(let a of n.files)t&&a.endsWith(t)||e.add((0,S.normalizePath)(a));for(let a of n.folders)await this.collectFilesInFolder(a,e,t)}catch(n){this.deps.errorLog(`Error collecting files in ${i}:`,n)}}async buildReferenceMap(i){let e=this.app.vault.getMarkdownFiles();for(let t of e)await this.deps.featureScanner.collectFileReferences(t,i)}findUnusedFiles(i,e){let t=new Set;for(let n of i)this.isFileReferenced(n,e)||t.add(n);return t}isFileReferenced(i,e){if(e.has(i))return!0;let t=i.split("/").pop()||"";for(let n of e){let a=n.split("/").pop()||"";if(t===a)return!0}return!1}async calculateFileSizes(i){let e=0;for(let t of i)try{let n=await this.app.vault.adapter.stat(t);n&&(e+=n.size)}catch(n){this.deps.errorLog(`Error getting file size for ${t}:`,n)}return e}async deleteUnusedFiles(i){let e=0;for(let t of i)await this.deps.trashFileAtPath(t)&&e++;return this.deps.debugLog(`Deleted ${e} unused files`),e}};var Ne=(g,i)=>{switch(i){case"wiki":return`[[${g}]]`;case"embed":return`![[${g}]]`;case"plain":default:return g}},ie=(g,i)=>{let{property:e,value:t,format:n,keepEmpty:a}=i;if(t){g[e]=Ne(t,n);return}a?g[e]="":delete g[e]};var q=g=>g?(...i)=>{let e=new Date().toTimeString().split(" ")[0];console.log(`${e}`,...i)}:()=>{},Te=()=>(...g)=>{let i=new Date().toTimeString().split(" ")[0];console.error(`${i}`,...g)};var _=class _ extends F.Plugin{constructor(){super(...arguments);this.isRunningBulkUpdate=!1;this.updatingFiles=new Set;this.debugLogger=q(!1);this.errorLogger=Te();this.isFirstInstall=!1}async onload(){let e=await this.loadSettings();this.isFirstInstall=e.isFirstInstall,this.debugLog("Plugin loaded, debug mode:",this.settings.debugMode,"dry run:",this.settings.dryRun),this.thumbnailService=new W(this.app,this.settings,{debugLog:this.debugLog.bind(this),errorLog:this.errorLog.bind(this)}),this.featureScanner=new Y(this.app,this.settings,{downloadExternalImage:this.downloadExternalImage.bind(this),downloadYoutubeThumbnail:this.downloadThumbnail.bind(this),debugLog:this.debugLog.bind(this),errorLog:this.errorLog.bind(this)}),this.imageMaintenance=new j(this.app,this.settings,{featureScanner:this.featureScanner,thumbnailService:this.thumbnailService,debugLog:this.debugLog.bind(this),errorLog:this.errorLog.bind(this),trashFileAtPath:this.trashFileAtPath.bind(this)}),this.addCommand({id:"update-all",name:this.settings.createResizedThumbnail&&this.settings.resizedFrontmatterProperty?u.commands.updateAll:u.commands.updateAllNoThumbnail,callback:()=>this.updateAllFeaturedImages()}),this.addCommand({id:"update-folder",name:this.settings.createResizedThumbnail&&this.settings.resizedFrontmatterProperty?u.commands.updateFolder:u.commands.updateFolderNoThumbnail,callback:()=>this.updateFolderFeaturedImages()}),this.addCommand({id:"remove-all",name:this.settings.createResizedThumbnail&&this.settings.resizedFrontmatterProperty?u.commands.removeAll:u.commands.removeAllNoThumbnail,callback:()=>this.removeAllFeaturedImages()}),this.addCommand({id:"cleanup-unused",name:u.commands.cleanupUnused,callback:()=>this.cleanupUnusedImages()}),this.addCommand({id:"rerender-thumbnails",name:u.commands.rerenderThumbnails,callback:()=>this.rerenderAllResizedThumbnails()}),this.registerEvent(this.app.metadataCache.on("changed",t=>{t instanceof F.TFile&&t.extension==="md"&&!this.updatingFiles.has(t.path)&&!this.isRunningBulkUpdate&&this.setFeaturedImage(t)})),this.addSettingTab(new $(this.app,this)),this.app.workspace.onLayoutReady(()=>{this.checkForVersionUpdate()})}debugLog(...e){this.settings.debugMode&&this.debugLogger(...e)}errorLog(...e){this.errorLogger(...e)}isTFile(e){return H(e)}onunload(){}async loadSettings(){let e=await this.loadData(),t=e&&typeof e=="object"?e:null,n=t===null;return this.settings={...L,...t!=null?t:{}},this.debugLogger=q(this.settings.debugMode),this.featureScanner&&this.featureScanner.setSettings(this.settings),this.thumbnailService&&this.thumbnailService.setSettings(this.settings),this.imageMaintenance&&this.imageMaintenance.setSettings(this.settings),this.settings.useMediaLinks&&this.settings.mediaLinkFormat==="plain"&&(this.settings.mediaLinkFormat="embed",await this.saveData(this.settings)),n&&(this.settings.lastShownVersion=this.manifest.version,await this.saveData(this.settings)),{isFirstInstall:n}}async checkForVersionUpdate(){if(this.isFirstInstall)return;let e=this.manifest.version,t=this.settings.lastShownVersion;if(!!t&&t===e)return;let{compareVersions:a,getLatestReleaseNotes:s,getReleaseNotesBetweenVersions:r,isReleaseAutoDisplayEnabled:d}=await Promise.resolve().then(()=>(te(),ee));if(!d(e))return;let{WhatsNewModal:l}=await Promise.resolve().then(()=>(Z(),J)),o=t&&a(e,t)>0?r(t,e):s();new l(this.app,o,this.manifest.fundingUrl,()=>{setTimeout(()=>{this.persistLastShownVersion(e)},1e3)}).open()}async persistLastShownVersion(e){try{this.settings.lastShownVersion=e,await this.saveSettings()}catch(t){this.errorLog("Failed to persist lastShownVersion:",t)}}async saveSettings(){await this.saveData(this.settings),this.debugLogger=q(this.settings.debugMode),this.featureScanner&&this.featureScanner.setSettings(this.settings),this.thumbnailService&&this.thumbnailService.setSettings(this.settings),this.imageMaintenance&&this.imageMaintenance.setSettings(this.settings)}async setFeaturedImage(e){if(!this.featureScanner)return this.errorLog("Feature scanner not initialized, skipping featured image update for",e.path),!1;if(!this.thumbnailService)return this.errorLog("Thumbnail service not initialized, skipping featured image update for",e.path),!1;let t=this.featureScanner.getFrontmatterImageInfo(e,this.settings.frontmatterProperty),n=t==null?void 0:t.resolvedPath,a=this.settings.createResizedThumbnail?this.featureScanner.getFrontmatterImageInfo(e,this.settings.resizedFrontmatterProperty):void 0,s=a==null?void 0:a.resolvedPath;if(this.shouldSkipProcessing(e))return!1;let r=await this.featureScanner.getFeatureFromFrontmatterSources(e);if(!r){let h=await this.app.vault.cachedRead(e);r=await this.featureScanner.getFeatureFromDocument(h,e,n)}let d=s,l;r&&r!==n&&this.settings.createResizedThumbnail?(d=await this.thumbnailService.createThumbnail(r),this.debugLog(`THUMBNAIL GENERATED
- File: ${e.path}
- Original: ${r}
- Thumbnail: ${d}`),s&&s!==d&&(l=s)):r||(d=void 0,s&&(l=s));let o=r&&!this.isValidUrl(r)?(0,F.normalizePath)(r):r;d=d&&!this.isValidUrl(d)?(0,F.normalizePath)(d):d;let c=o?!this.featureScanner.isFrontmatterPathEqual(t,o):!!(t!=null&&t.rawValue),w=d?!this.featureScanner.isFrontmatterPathEqual(a,d):!!(a!=null&&a.rawValue);return c||w?(await this.updateFrontmatter(e,o,d),l&&await this.thumbnailService.deleteOrphanedThumbnail(l,e),this.debugLog(`FEATURE UPDATED
- File: ${e.path}
- Current feature: ${n}
- New feature: ${o}
- Thumbnail: ${d}`),!0):!1}getFeatureFromFrontmatter(e){if(!this.featureScanner)return;let t=this.featureScanner.getFrontmatterImageInfo(e,this.settings.frontmatterProperty);return t==null?void 0:t.resolvedPath}getThumbnailFromFrontmatter(e){if(!this.settings.createResizedThumbnail||!this.featureScanner)return;let t=this.featureScanner.getFrontmatterImageInfo(e,this.settings.resizedFrontmatterProperty);return t==null?void 0:t.resolvedPath}shouldSkipProcessing(e){var d,l;let t=this.app.metadataCache.getFileCache(e);if(((l=(d=t==null?void 0:t.frontmatter)==null?void 0:d.tags)!=null?l:[]).includes("excalidraw"))return!0;let a=this.settings.frontmatterProperty in((t==null?void 0:t.frontmatter)||{}),s=this.settings.excludedFolders.some(o=>e.path.startsWith(`${o}/`));return this.settings.onlyUpdateExisting&&!a||s}async downloadExternalImage(e,t="external"){if(!this.settings.downloadExternalImages)return;let n=(0,F.normalizePath)(`${this.settings.thumbnailsFolder}/${t}`),a=this.generateHashedFilenameFromUrl(e);if(!a){this.errorLog("Failed to generate hashed filename for:",e);return}let s=`${n}/${a}.failed.png`;if(await this.app.vault.adapter.exists(s)){let r=await this.app.vault.adapter.stat(s);if(!r)return;let d=Date.now()-r.mtime,l=720*60*1e3;if(d<l)return this.debugLog("Skipping recently failed download:",e),s;this.debugLog("Retrying old failed download:",e),await this.trashFileAtPath(s)||this.debugLog("Failed to remove old failed marker via trash:",s)}if(this.settings.dryRun)return this.debugLog("Dry run: Skipping image download, using mock path"),`${n}/${a}.jpg`;try{await this.app.vault.adapter.exists(n)||await this.app.vault.adapter.mkdir(n);let r=await this.findExistingImageFile(n,a);if(r)return r;let d=await(0,F.requestUrl)({url:e,method:"GET"}),l=this.getHeaderValue(d.headers,"content-type"),o=this.getExtensionFromContentType(l);if(!o)throw new Error(`Unknown Content-Type for image: ${l!=null?l:"missing"}`);let p=`${n}/${a}.${o}`;return await this.app.vault.adapter.writeBinary(p,d.arrayBuffer),p}catch(r){this.errorLog("Failed to download image, error:",r);try{return await this.app.vault.adapter.writeBinary(s,_.FAILED_IMAGE_DATA.buffer),s}catch(d){this.errorLog("Failed to write placeholder image:",d);return}}}async findExistingImageFile(e,t){for(let n of M){let a=`${e}/${t}.${n}`;if(await this.app.vault.adapter.exists(a))return a}}async trashFileAtPath(e){let t=(0,F.normalizePath)(e),n=this.app.vault.getAbstractFileByPath(t);if(!this.isTFile(n))return this.debugLog("Attempted to trash non-file path:",t),!1;try{return await this.app.fileManager.trashFile(n),!0}catch(a){return this.errorLog(`Failed to trash file at ${t}:`,a),!1}}getExtensionFromContentType(e){if(!e)return;let t={"image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp","image/svg+xml":"svg","image/avif":"avif"},n=e.split(";")[0].trim().toLowerCase();return t[n]}getHeaderValue(e,t){let n=e[t];if(n!==void 0)return n;let a=t.toLowerCase();for(let[s,r]of Object.entries(e))if(s.toLowerCase()===a)return r}isValidUrl(e){return k(e)}generateHashedFilenameFromUrl(e){return D(e)}async updateFrontmatter(e,t,n=void 0){this.isRunningBulkUpdate||this.updatingFiles.add(e.path);try{if(this.settings.dryRun){if(this.debugLog("Dry run: Skipping frontmatter update"),!this.isRunningBulkUpdate&&this.settings.showNotificationsOnUpdate){let a=t?`Dry run: Would change featured image to: ${t}`:"Dry run: Would remove featured image";new F.Notice(a)}}else if(await this.app.fileManager.processFrontMatter(e,a=>{ie(a,{property:this.settings.frontmatterProperty,value:t,format:this.settings.mediaLinkFormat,keepEmpty:this.settings.keepEmptyProperty}),this.settings.createResizedThumbnail&&ie(a,{property:this.settings.resizedFrontmatterProperty,value:n,format:this.settings.mediaLinkFormat,keepEmpty:this.settings.keepEmptyProperty})}),!this.isRunningBulkUpdate&&this.settings.showNotificationsOnUpdate){let a=t?`Featured image set to ${t}`:"Featured image removed";new F.Notice(a)}}finally{this.isRunningBulkUpdate||setTimeout(()=>{this.updatingFiles.delete(e.path)},100)}}async downloadThumbnail(e,t){var r;if(!this.settings.downloadYoutubeThumbnails)return;let n=(0,F.normalizePath)(`${this.settings.thumbnailsFolder}/youtube`),a=`${n}/${e}`;if(t&&t.startsWith(a))return t;await this.app.vault.adapter.exists(n)||await this.app.vault.adapter.mkdir(n);for(let d of["webp","jpg"]){let l=`${n}/${e}.${d}`;if(await this.app.vault.adapter.exists(l))return l}if(this.settings.dryRun)return this.debugLog("Dry run: Skipping thumbnail download, using mock path"),`${n}/${e}.webp`;let s=[{quality:"maxresdefault.webp",extension:"webp"},{quality:"maxresdefault.jpg",extension:"jpg"},{quality:"sddefault.jpg",extension:"jpg"},{quality:"hqdefault.jpg",extension:"jpg"},{quality:"mqdefault.jpg",extension:"jpg"},{quality:"default.jpg",extension:"jpg"}];for(let d of s){let l=`${n}/${e}.${d.extension}`;try{let o=await this.fetchThumbnail(e,d.quality);if((o==null?void 0:o.status)===200)return await this.app.vault.adapter.writeBinary(l,o.arrayBuffer),d.extension!=="webp"&&this.debugLog(`YouTube thumbnail fallback used ${d.quality} for video ${e}, saved as ${l}`),l;this.debugLog(`YouTube thumbnail request returned status ${(r=o==null?void 0:o.status)!=null?r:"unknown"} for ${d.quality}`)}catch(o){this.debugLog(`Failed to download ${d.quality} thumbnail for ${e}:`,o)}}this.errorLog(`Thumbnail for video ${e} could not be downloaded`)}async fetchThumbnail(e,t){let n=t.endsWith(".webp"),s=`${n?"https://i.ytimg.com/vi_webp":"https://img.youtube.com/vi"}/${e}/${t}`;if(!this.isValidUrl(s))throw new Error(`Invalid YouTube thumbnail URL: ${s}`);return await(0,F.requestUrl)({url:s,method:"GET",headers:{Accept:n?"image/webp":"image/jpeg"}})}async updateAllFeaturedImages(){if(!await this.showConfirmationModal("Update all featured images","This will scan all markdown files in your vault and update or add featured images based on the first image, YouTube link, or Auto Card Link image found in each file. Proceed?"))return;let t=this.app.vault.getMarkdownFiles();await this.processFilesWithProgress(t,"bulk update of featured images","updating featured images")}async updateFolderFeaturedImages(){var r;let e=this.app.workspace.getActiveFile();if(!e){new F.Notice("No file is currently active");return}let t=((r=e.parent)==null?void 0:r.path)||"/";if(!await this.showConfirmationModal("Update folder featured images",`This will scan all markdown files in "${t}" and its subfolders, and update or add featured images based on the first image, YouTube link, or Auto Card Link image found in each file. Proceed?`))return;let s=this.app.vault.getMarkdownFiles().filter(d=>t==="/"?!0:d.path.startsWith(`${t}/`));await this.processFilesWithProgress(s,"bulk update of featured images in folder","updating featured images")}async processFilesWithProgress(e,t,n){this.isRunningBulkUpdate=!0;let a=5;new F.Notice(`Starting ${this.settings.dryRun?"dry run of ":""}${t}...`);let s=0,r=0,d=e.length,l=Date.now();try{for(let o=0;o<e.length;o+=a){let p=e.slice(o,o+a),c=await Promise.all(p.map(async h=>{try{let v=h.stat.mtime,x=await this.setFeaturedImage(h);return x&&await C(this.app,h,v,{dryRun:this.settings.dryRun,errorLog:this.errorLog.bind(this),context:"Failed to adjust modification time during bulk update"}),{success:!0,updated:x}}catch(v){return this.errorLog(`Error processing file ${h.path}:`,v),{success:!1,updated:!1}}}));s+=c.filter(h=>h.success&&h.updated).length,r+=c.filter(h=>!h.success).length;let w=Date.now();if(w-l>=5e3){let h=`Processed ${o+p.length} of ${d} files. Updated ${s} featured images`;r>0&&(h+=`. Errors: ${r}`),new F.Notice(h),l=w}}}finally{setTimeout(()=>{this.isRunningBulkUpdate=!1;let o=`Finished ${this.settings.dryRun?"dry run of ":""}${n}. Updated: ${s} files`;r>0&&(o+=`. Errors: ${r}`),new F.Notice(o)},100)}}async removeAllFeaturedImages(){let e=`This will remove the "${this.settings.frontmatterProperty}" property from the frontmatter of all markdown files in your vault`;if(this.settings.createResizedThumbnail&&(e+=` and the "${this.settings.resizedFrontmatterProperty}" property if present`),e+=". Proceed?",!await this.showConfirmationModal("Remove all featured images",e))return;this.isRunningBulkUpdate=!0,new F.Notice(`Starting ${this.settings.dryRun?"dry run of ":""}removal of featured images from all files...`);let n=this.app.vault.getMarkdownFiles(),a=0;for(let s of n){let r=this.getFeatureFromFrontmatter(s),d=s.stat.mtime,l=await this.removeFeaturedImage(s,r);l&&await C(this.app,s,d,{dryRun:this.settings.dryRun,errorLog:this.errorLog.bind(this),context:"Failed to adjust modification time during cleanup"}),l&&a++}setTimeout(()=>{this.isRunningBulkUpdate=!1;let s=`Finished ${this.settings.dryRun?"dry run of ":""}removing featured images from ${a} files.`;new F.Notice(s)},100)}async removeFeaturedImage(e,t){if(!t)return!1;if(this.settings.preserveTemplateImages)return this.debugLog("Preserving existing featured image:",t),!1;let n=this.getThumbnailFromFrontmatter(e);return this.debugLog(`FEATURE REMOVED
- File: `,e.path),await this.updateFrontmatter(e,void 0,void 0),n&&this.thumbnailService&&await this.thumbnailService.deleteOrphanedThumbnail(n,e),!0}async showConfirmationModal(e,t,n=!0){return new Promise(a=>{new B(this.app,e,t,s=>{a(s)},n).open()})}async cleanupUnusedImages(){if(!this.imageMaintenance){this.errorLog("Image maintenance service not initialized.");return}await this.imageMaintenance.cleanupUnusedImages(this.showConfirmationModal.bind(this))}async rerenderAllResizedThumbnails(){if(!this.imageMaintenance){this.errorLog("Image maintenance service not initialized, unable to re-render thumbnails.");return}await this.imageMaintenance.rerenderAllResizedThumbnails({confirm:this.showConfirmationModal.bind(this),startBulkUpdate:()=>{this.isRunningBulkUpdate=!0},endBulkUpdate:()=>{this.isRunningBulkUpdate=!1},getFeatureFromFrontmatter:this.getFeatureFromFrontmatter.bind(this),updateFrontmatter:this.updateFrontmatter.bind(this)})}};_.FAILED_IMAGE_DATA=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,8,6,0,0,0,31,21,196,137,0,0,0,10,73,68,65,84,120,156,99,0,0,0,2,0,1,229,39,222,252,0,0,0,0,73,69,78,68,174,66,96,130]);var G=_;

/* nosourcemap */